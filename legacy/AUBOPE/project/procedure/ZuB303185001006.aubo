--Procedure Program

--block script function definition
  function blockScriptFunc_sendCoordToSCADA()
    -- параметры системы координат поворотки
    calMet, jP1, jP2, jP3, tP = get_user_coord_param("povorotnayaOsReal")
    -- параметры системы координат инструмента
    posDiscTool, oriDiscTool = get_tool_kinematics_param("drillDisc")
    -- vzyal tekushuyu posiziyu
    wpCurr = get_current_waypoint()
    jntCurr = {wpCurr.joint.j1, wpCurr.joint.j2, wpCurr.joint.j3, wpCurr.joint.j4, wpCurr.joint.j5, wpCurr.joint.j6}
    posCurr, oriCurr = base_to_user(jntCurr, posDiscTool, oriDiscTool, calMet, jP1, jP2, jP3, tP)
    set_modbus_io_status("M_F_faskaR26Ah", posCurr[1]*1000)
    set_modbus_io_status("M_F_faskaR26Ch", posCurr[2]*1000)
    set_modbus_io_status("M_F_faskaR26Eh", posCurr[3]*1000)
  end  --function blockScriptFunc_sendCoordToSCADA()

  function blockScriptFunc_servoPosRelCentr()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    s_m = require("service_module")
    fastSpeedServo = 655426 --A0042h - rel, speed1500, acc/dcc200
    
    P126_modulCentrVenec = get_modbus_io_status("M_F_globalR1B0h") -- модуль центрального венца;
    P126_modulCentrVenec = math.abs(P126_modulCentrVenec) -- нормализация, убираю знак
    -- otnositel`noe peremeshenie na velichinu odnogo zuba central`nogo venca
    set_modbus_io_status("M_L_PR13param", fastSpeedServo)  --A0042h - rel, speed1500, acc/dcc200
    set_modbus_io_status("M_L_PR13coord", -P126_modulCentrVenec * math.pi * 1000)
    s_m.servoGo(13) -- быстро назад
  end  --function blockScriptFunc_servoPosRelCentr()

  function blockScriptFunc_srvPosAbsLeftZub()
    local function ServoPos(SrvP)
        -- PR97param - 851970 - D0002h, ABSpos, speed2300, acc200
        set_modbus_io_status("M_L_PR97coord", SrvP*1000) --
        sleep(0.25)
        set_modbus_io_status("50E_PR", 97) --
        i = 0
        while (i~=20097) do
            i = get_modbus_io_status("50E_PR") --
        end
    end
    
    P162_reykaZubleft = get_modbus_io_status("M_F_faskaR24Eh") --Р162, позиция рейки, зуб слева; мм, float, 32bit
    P162_reykaZubleft = -math.abs(P162_reykaZubleft ) -- нормализация, убираю знак
    -- позиция рейки Zub Sleva, absolutnyaya poziciya
    ServoPos(P162_reykaZubleft)
  end  --function blockScriptFunc_srvPosAbsLeftZub()

  function blockScriptFunc_set_mk311DO()
    function bit(p)
        return 2 ^ (p -  1)
    end
    function hasbit(x , p)
         return x % (p + p) >= p
    end
    function setbit(x , p)
         return hasbit(x , p) and x or x + p
    end
    function clearbit(x , p)
         return hasbit(x , p) and x-p or x
    end
    
    inp = get_modbus_io_status("mk311_DO")
    bitNum = get_global_variable("V_I_DIOnumber")
    bitState = get_global_variable("V_B_mk311DOstate")
    if bitState == true then 
        res = setbit(inp , bit(bitNum))
    else 
        res = clearbit(inp , bit(bitNum))
    end
    set_modbus_io_status("mk311_DO", res)
  end  --function blockScriptFunc_set_mk311DO()

  function blockScriptFunc_check_mk312DO()
    function bit(p)
        return 2 ^ (p -  1)
    end
    function hasbit(x , p)
         return x % (p + p) >= p
    end
    
    inp = get_modbus_io_status("mk312_DO")
    bitNum = get_global_variable("V_I_DIOnumber")
    res = hasbit(inp , bit(bitNum))
    set_global_variable("V_B_mk312DOstate", res)
  end  --function blockScriptFunc_check_mk312DO()

  function blockScriptFunc_srvPosAbsRihtZub()
    local function ServoPos(SrvP)
        -- PR97param - 851970 - D0002h, ABSpos, speed2300, acc200
        set_modbus_io_status("M_L_PR97coord", SrvP*1000) --
        sleep(0.25)
        set_modbus_io_status("50E_PR", 97) --
        i = 0
        while (i~=20097) do
            i = get_modbus_io_status("50E_PR") --
        end
    end
    
    P163_reykaZubright = get_modbus_io_status("M_F_faskaR250h") --Р163, позиция рейки,зубсправа;мм,float, 32bit
    P163_reykaZubright = -math.abs(P163_reykaZubright) -- нормализация, убираю знак
    -- позиция рейки Zub Sleva, absolutnyaya poziciya
    ServoPos(P163_reykaZubright)
  end  --function blockScriptFunc_srvPosAbsRihtZub()

  function blockScriptFunc_preFaskaScript()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    faska_m = require("faska_module")
    s_m = require("service_module")
    mill_m = require("milling_module")
    
    local function preStartFaska()
        -- sbros флага состояния выполнения
        set_modbus_io_status("synhr_c121h", 0)
        -- данные операции притупления фаски
        P150_Ddisc, P151_offsetDisc, P152_offsetTime, P153_printDbgFlag, P154_backDisk, P155_zausDisk, P156_operationX, P157_glavUgolX, P158_glavUgolY, P159_glavUgolZ, P160_perevorotyX, P161_saftyX, P162_reykaZubleft, P163_reykaZubright, P164_operationY, P165_venec1Storona, P166_venec2Storona, P167_venec3Storona, P168_IDstring, P169_v1s1leftCorrectorZ, P170_v1s2leftCorrectorZ, P171_v2s1leftCorrectorZ, P172_v2s2leftCorrectorZ,     P173_v3s1leftCorrectorZ, P174_v3s2leftCorrectorZ, P175_v1s1rightCorrectorZ, P176_v1s2rightCorrectorZ,   P177_v2s1rightCorrectorZ, P178_v2s2rightCorrectorZ, P185_v3s1rightCorrectorZ, P186_v3s2rightCorrectorZ, P187_venec1StoronaV, P188_venec2StoronaV, P189_venec3StoronaV = faska_m.getDataFaska()
        -- proverka dannyx
        faska_checkStatusDetect = faska_m.checkDataFaska(P150_Ddisc, P151_offsetDisc, P152_offsetTime, P153_printDbgFlag, P154_backDisk, P155_zausDisk, P156_operationX, P157_glavUgolX, P158_glavUgolY, P159_glavUgolZ, P160_perevorotyX, P161_saftyX, P162_reykaZubleft, P163_reykaZubright, P164_operationY, P165_venec1Storona, P166_venec2Storona, P167_venec3Storona, P168_IDstring, P169_v1s1leftCorrectorZ, P170_v1s2leftCorrectorZ, P171_v2s1leftCorrectorZ, P172_v2s2leftCorrectorZ,     P173_v3s1leftCorrectorZ, P174_v3s2leftCorrectorZ, P175_v1s1rightCorrectorZ, P176_v1s2rightCorrectorZ,   P177_v2s1rightCorrectorZ, P178_v2s2rightCorrectorZ, P185_v3s1rightCorrectorZ, P186_v3s2rightCorrectorZ, P187_venec1StoronaV, P188_venec2StoronaV, P189_venec3StoronaV)
        -- если данные не корректные, то выход с кодом -1
        if faska_checkStatusDetect ~= 0 then
            -- установ флага состояния выполнения
            set_modbus_io_status("synhr_c121h", 1)
            s_m.beep(1.5)
            print("")
            print("<<<<<<<<<<<<< preStartFaska >>>>>>>>>>>>>")
            print("<<<<< некорректные входные данные. kод выхода -1 >>>>>>>>>>")
            print("<<<<<<<<<<<<< preStartFaska >>>>>>>>>>>>>")
            print("")
            return
        end
        -- читаю Z координату точек касания(povorotka, tool - probeRobot)
        v1s1_Ztorca, v1s2_Ztorca, v2s1_Ztorca, v2s2_Ztorca, v3s1_Ztorca, v3s2_Ztorca = mill_m.getXcoordObmera()
        set_global_variable("V_D_v1s1_Ztorca", v1s1_Ztorca)
        set_global_variable("V_D_v1s2_Ztorca", v1s2_Ztorca)
        set_global_variable("V_D_v2s1_Ztorca", v2s1_Ztorca)
        set_global_variable("V_D_v2s2_Ztorca", v2s2_Ztorca)
        set_global_variable("V_D_v3s1_Ztorca", v3s1_Ztorca)
        set_global_variable("V_D_v3s2_Ztorca", v3s2_Ztorca)
    end
    --*************************основной код************************************
    preStartFaska()
    --*************************основной код************************************
  end  --function blockScriptFunc_preFaskaScript()

  function blockScriptFunc_servoPosRelCentD()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    s_m = require("service_module")
    workSpeedServo = 131138 -- 20042h - rel, speed100, acc/dcc200
    
    P126_modulCentrVenec = get_modbus_io_status("M_F_globalR1B0h") -- модуль центрального венца;
    P126_modulCentrVenec = math.abs(P126_modulCentrVenec) -- нормализация, убираю знак
    P125_zCentrVenec = get_modbus_io_status("globalR1AFh") -- z центрального венца;
    P125_zCentrVenec = math.abs(P125_zCentrVenec) -- нормализация, убираю знак
    P125_zCentrVenec = math.floor(P125_zCentrVenec) -- нормализация, только целая часть
    -- otnositel`noe peremeshenie na velichinu delitel`nogo diametra central`nogo venca
    set_modbus_io_status("M_L_PR13param", workSpeedServo)  -- 20042h - rel, speed100, acc/dcc200
    set_modbus_io_status("M_L_PR13coord", -P126_modulCentrVenec * math.pi * 1000 * P125_zCentrVenec)
    s_m.servoGo(13) -- pereeezd
  end  --function blockScriptFunc_servoPosRelCentD()

--script function definition
  function ifScriptFunc_10()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("7be83c000da64ec9997410f922aac029")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("075b265502784097960a146fe4bf6c72")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("d9a1b074c2d64598ad8b6706754e18f8")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_40()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_20() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_21() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_22() == false) then
        break
      end
    end
  end

  function ifScriptFunc_20()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("24093d3bbb994bf89ac9eabf60ddc51d")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_10()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("490f07e35b7940c0a942187d8a7a7061")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("f615c67edd9c42b0a9e13db9cb3fef08")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_30()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_31()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_32()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_33()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2left
    --venec2Storona2left
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("85b212edaf04447e926283d462e2bd12")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("c15af4ff84484a62b5584836a510cfdd")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("8b28e89e43dc45c4888d1908a60b21cd")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f20f9738eff4413ba141a97d6a7c3f3c")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0 -  get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("94e6a665324e43138fd7fa9e960e4ad2")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("e2b1465728b94723b1145b78eda0447a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("2ced84d676ed4a9c901cb19054789a7f")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("512d55a7a0a64a7aa3e2ef351ac19641")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(get_modbus_io_status("M_F_faskaR24Ah") / 4)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("f9b07bbdef954a1c81f88990812fe48f")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("ebba9a3f909c400bac0c1158e6f308b5")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_34()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("1d26b612bd6b473fbb6258802f73f2c5")
        move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("0e137b92c44f448f9a08fcea91a79407")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_35()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("897699e6cf1e40459a86953a1b422da7")
        move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("56fac141ef34448bb175c9ba1f7c43c3")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_36()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_39()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_19() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("48a8b2230db44b11b62e35a1ed8f1a47")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("79a3955cab494454b89d889f4da25893")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("9f80aab337044dfa882c99fae12b4946")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("98326fbab2c147ffacd6d65b0d5f671f")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("5fe697372a8840ae9a20c1bf087d4e17")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("7296ee73bba2497ca7236cd99dfbf32f")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("3047d9cff0ff4d6696d8592a6d2f484b")
        move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("0a13f166373743ef9b44a2b2833811fc")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_50()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("621e69f156e6410aa153079e4bb58c7a")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_25() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("30925880c35e41678a70a32843b22c19")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("51c3cbe0f910430981dbc12a0d873c06")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("b1686ca0018945a184a3dfb4eddc64db")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_52()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("9e2f6304f63a4257ab9929943f9374c2")
    sleep(0.8)
    set_step_breakpoint()
  end

  function ifScriptFunc_70()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("5955499987f8498e8b1d94c0f6a312d9")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_30()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("f6fee43596f44dbdb2ef84eb8c9a6547")
      move_line({-4.004170, 0.244111, -2.497304, -2.048737, -1.610444, -3.266434}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("8edafd481f0d473b9cd4c4458d2c4c94")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_60()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("df95b8c0e9464a1cbef46a39ace9ffcc")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_20()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("832369d04fe94eb0b7488477e67dc446")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("407ba4dd15d742d393a6116d509e4e1b")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_0()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("26cec97f88eb40b7a238297b92617b78")
    popup_message(2, "preFaskaScript: необрабатываемое исключение. Продолжение работы невозможно. Проект будет остановлен", true)
  end

  function loopScriptFunc_0()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("64b3e1c028864a818372ae70406cdba1")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("66752b2672dd48628cf094447b6ce91f")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_1()
    --(Logic tree item : Set) Set_v1s1
    set_current_logic_tree_item("6702f578c21d474a84bffceae0388138")
    set_global_variable("V_D_sat3_v1s1_const", get_global_variable("V_D_v1s1_Ztorca"))
    --(Logic tree item : Set) Set_v1s2
    set_current_logic_tree_item("d0dc9456e87c41159c2f0eecc9d35f8f")
    set_global_variable("V_D_sat3_v1s2_const", get_global_variable("V_D_v1s2_Ztorca"))
    --(Logic tree item : Set) Set_v2s1
    set_current_logic_tree_item("73bde172ef3c4f2eb6f5f9e2d04e7785")
    set_global_variable("V_D_sat3_v2s1_const", get_global_variable("V_D_v2s1_Ztorca"))
    --(Logic tree item : Set) Set_v2s2
    set_current_logic_tree_item("dbbfc66fab2b4010ae8a5fcd7a4460c8")
    set_global_variable("V_D_sat3_v2s2_const", get_global_variable("V_D_v2s2_Ztorca"))
    --(Logic tree item : Set) Set_v3s1
    set_current_logic_tree_item("045320dc366048bf9d58e2a3c9bbb4ca")
    set_global_variable("V_D_sat3_v3s1_const", get_global_variable("V_D_v3s1_Ztorca"))
    --(Logic tree item : Set) Set_v3s2
    set_current_logic_tree_item("c852a9b744b04f33bc806afdb4011b5d")
    set_global_variable("V_D_sat3_v3s2_const", get_global_variable("V_D_v3s2_Ztorca"))
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("0ab333ec66d64e8b9c66fb801a9247e2")
    popup_message(0, "constanty pereopredeleny", true)
  end

  function loopScriptFunc_31()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("741e929a8bba4314b88a63e49a326b01")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("4910c1f0fcd544da80ef32895b1435d2")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_61()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("e824aac7afe64990aa77d736a17591b4")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_21()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_8() == false) then
        break
      end
    end
  end

  function ifScriptFunc_51()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_31()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("ea7b0bd599874b739470779606db5115")
      add_waypoint({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898})
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("d8a58982beb64b09b8b95baaf9ae5c14")
      add_waypoint({-4.132698, 0.056128, -2.310253, -0.435751, -0.748622, -1.562143})
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("387cf98c8c634ad6a2f921564a92854c")
      add_waypoint({-4.130629, 0.054250, -2.312059, -0.437761, -0.747900, -1.559297})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_41()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("d022a17af75d4ae3ba3537b1f18b2366")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("03b7d3c09a8643789f9d24338a561837")
      add_waypoint({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898})
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("da13fc147bef43d7be310df24164e248")
      add_waypoint({-4.132698, 0.056128, -2.310253, -0.435751, -0.748622, -1.562143})
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("1836548bcb1b47dbb0c23b88bfb6ed11")
      add_waypoint({-4.130629, 0.054250, -2.312059, -0.437761, -0.747900, -1.559297})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_21()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("334ffc5edbfc48248edc15193df63ad6")
      move_line({-4.132698, 0.056128, -2.310253, -0.435751, -0.748622, -1.562143}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("2a5d15d66ae5424b997e6f7797f21f53")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_11()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_26()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_27()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("992328c0d3144bcc992811b29a26e151")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("445ba0686c544a85815ad43f7a433d55")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_28()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("33d91cf7056e4bebae1277a5542e0740")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_29()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("7ec54fea8c86452c81ae35d3949bdf4a")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_11()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_2() == false) then
        break
      end
    end
  end

  function ifScriptFunc_71()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("6e71e541240046178ce632d78e8af084")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_1()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("931fe8aeca0d496d83bf49d1bcaa7d3a")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_9()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("1f35a482b7194e7b885427afbe7b1302")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_32()
    --(Logic tree item : Move) Move_vershin_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1_vershina
      set_current_logic_tree_item("c866970362d94ca9b15ef85eadde8d8a")
      move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("03dc1b8e2a5f4e8baa5e19c798f7a6ac")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_22()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("1368b4f298ae4fcc85954259389dcb49")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_9() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("c2fac3c82c754140b612ce395e6ca836")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("7249ed9ba82948619c1c0b00b50a795e")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("865276a932454a70bab36ea0c2a7e7b1")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_24()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("22235eaa11e04b22892b3e583f3c012f")
    sleep(0.8)
    set_step_breakpoint()
  end

  function loopScriptFunc_22()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("78b139868f8d43feae189d9a3471fc8e")
      move_line({-4.130629, 0.054250, -2.312059, -0.437761, -0.747900, -1.559297}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("316efb6003be49828186036445cfda52")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_2()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("3450efc698b14b3fb7d6d5febf1c3f91")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("8e21840fd04044c8bb206aa76551d649")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_12()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("e07a5aceb9a6462bab37b06a3c17efbd")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("126896c4be914e2c87cb83670ed31f37")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_32()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("ae2e492b890f4595b793221b0344e009")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_42()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_23() == false) then
        break
      end
    end
  end

  function ifScriptFunc_62()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("1f12f0b957f64a3c9faa69b60b7ed53e")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_12()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_4() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_5() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_6() == false) then
        break
      end
    end
  end

  function ifScriptFunc_2()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_3()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ch") == 0) then
      ifFuncRet = ifScriptFunc_4()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) > 0.8 or ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_5()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St1left
    --venec2Storona1left
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("08493fbbf82c4bbd85dd1e2b41b31cd9")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("37814e9b2ac2460fbcdafef09edae208")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("54200ef499a64076a1626dc89f13c348")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("6b116c57f0304d4286b056b9d4d6cc75")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0 -  get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("a1ca9c909536469ea2d9d1b8b8b85775")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("565d934f27cd41738ead5498524a4676")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("e16d8a9ed3424bbc9622ddeffed209f0")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("1476d3d9147946b08b26d9c1e972df27")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR24Ah"))}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("f3da29cbb5604df888022ad560f6e259")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b07dc7c5dabd459ba7bfd705d173cac4")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_6()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1left_p1
        set_current_logic_tree_item("1b64f8317d4f4ef3b0459e446bdef4fe")
        move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("fd890bb434334d2c80b27917ba0b79be")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_7()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.200000)
      set_end_maxacc(1.400000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1left_p1
        set_current_logic_tree_item("40743857a8ea46c6964de64fcb87a2c7")
        move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("e7823bc6ab2c4441b7e355f928bddefb")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_8()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_11()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_3() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("3f52f0f01c014721ae5bb5fd744ff402")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("47656f59d76042e1adfb76a2597e5a46")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("a8c84bb3862f45a6b8d111ffbe9f705d")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("8b027e4239274d56b377c06f493a8c7f")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("a7377c58a45e4ae187c18b0aa8c550ff")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("42ac7ee77d524c7ba0825f812ee2dc65")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1left_p1
        set_current_logic_tree_item("3d12b4de113543bfa66caa8cee2ab2b5")
        move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("61d3cf9a00794ba4a95a91efeb9574ce")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_72()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("95db47a4ff064139a757edcc39b63471")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_52()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("3122bd6b3cd54640a29df5092c475b26")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("6e48ac3442394f548a36ddb36b7b9a5b")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("ab3e2479547b4c2689bb092b7dbdd68c")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_63()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_32() == false) then
        break
      end
    end
  end

  function ifScriptFunc_33()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("5c144785c3664d788a631fb857b5ebde")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_73()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_35() == false) then
        break
      end
    end
  end

  function ifScriptFunc_53()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_26() == false) then
        break
      end
    end
  end

  function ifScriptFunc_3()
    --(Logic tree item : Move) Move_initDrilDisk180
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
    set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
      set_current_logic_tree_item("17fb5acf3d7f4c199cacd477beff5d23")
      move_joint(get_global_variable("V_P_drillDisk180"), true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("f75aabaf37f34099900536ffdb85fed0")
      add_waypoint({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835})
      --(Logic tree item : Waypoint) v2s1left_p2
      set_current_logic_tree_item("ccc1400dbed54d0dad31d595ebfddfc1")
      add_waypoint({-4.007093, 0.601109, -1.564165, 0.398142, -1.456842, -2.977940})
      --(Logic tree item : Waypoint) v2s1left_p3
      set_current_logic_tree_item("11bc35f9feb3494d84e499fb3beb4646")
      add_waypoint({-4.005303, 0.599396, -1.567753, 0.396158, -1.455356, -2.976961})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_43()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_33()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("d25e9617bd2e43b09939fcb09213ef2a")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_65()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("0d6223e002d74663b7c499beea92be13")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_23()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("ba30ae9031664977ab3bab8c622c4987")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("796143299d784a91ad7bd5640f7412c7")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_23()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_3()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_12()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_13()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("f6b767c65fab45e4a461db32f87c17bd")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("edd602a03018489db6c116d5044a2b99")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_14()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("c2b152486d8f4da38f6477862d9d8428")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_15()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("58771b3c170b4b1a8171d710311b0b68")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_13()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("a6bc21b3e4b84d839665294be4060f0e")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("9004d38d3e4e4b9c8b9d7391e7267d3c")
      add_waypoint({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835})
      --(Logic tree item : Waypoint) v2s1left_p2
      set_current_logic_tree_item("073d37023eef4d60bd515c5a7a5f2631")
      add_waypoint({-4.007093, 0.601109, -1.564165, 0.398142, -1.456842, -2.977940})
      --(Logic tree item : Waypoint) v2s1left_p3
      set_current_logic_tree_item("2f0bd05461ff41c19a80f84ad9ba4d2e")
      add_waypoint({-4.005303, 0.599396, -1.567753, 0.396158, -1.455356, -2.976961})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_13()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p2
      set_current_logic_tree_item("5a66fb96d127473eadbf0578acb8c62c")
      move_line({-3.459856, 0.338889, -2.000741, -0.354933, -2.370610, -1.138413}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("d429c0716a4c4dfe9341837f71b97b37")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_24()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("f9495a415cd042de884c106cadfda79f")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("09e89a597c514b4a873fa2fee60b8684")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("af39beb464b641b58894c38f3f6b3b2f")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_4()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("ec0d58de75a64acb84f948c13fafa7ba")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_24()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("b8effa3d85b3447593d75b87b511273b")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("737d0557bd4148eda31c3af146d513f8")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_34()
    --(Logic tree item : Move) Move_vershin_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1_vershina
      set_current_logic_tree_item("358bc48508834c9ab97eb5ef8f02c605")
      move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("6dea8db3beb842ee8c94d5287550f695")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_14()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_7() == false) then
        break
      end
    end
  end

  function loopScriptFunc_14()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p3
      set_current_logic_tree_item("e7001c41cc0e4e60a1e0e407c6d33cb2")
      move_line({-3.463165, 0.339938, -2.000980, -0.359346, -2.371930, -1.142756}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("224143146ec5420f9ece3fad16d6fadd")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_44()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_45()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_46()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_47()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2right
    --venec2Storona2right
      --(Logic tree item : Script) srvPosAbsRihtZub
      set_current_logic_tree_item("f042e85f02784a9385d40f548057c69c")
      blockScriptFunc_srvPosAbsRihtZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("321f4a44268244f38f80ad29e239bfd4")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("5c647275c1dc47a7a97de99172ba0fe0")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("74c3dcec2d3242e192293a6d4d607658")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("21f0a62fe1504f3e8871a54860279beb")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b79b28bbdf514d49b6a4ac8b90f45b72")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("d515dcdbdaa34a7e9a28cda7296773e3")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("7ab1c01b6276473582125f511fe05dba")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR24Ah") + 15)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("539b8b7aaaa74f76b0fb9434a1186a76")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("d0a6010cc7794604929c3263a223cfa6")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_48()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("8054a09c45ae455c9314bbd900dd8e39")
        move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f446186aafeb402b827636b2f443c0d2")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_49()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("67413ed5ea964248be6cf0f016019655")
        move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("164f44d387444289a6171b2f979b819a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_50()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_53()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_27() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("7b00a9d6883148418440eabe8273515d")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("ffab404d076e4f219a68b58c7a7e6d88")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("6a3000cdf89f4be999b569c41da58d37")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("edfd6b0d8b6046e7b83217bd80605caa")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("df309f919e194d118f6f63e349863844")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("946c8282ba274d0fb28363147faaf872")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("68c07e753a7f42f1b39f5110758e5b91")
        move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("3c72bdc8904a4d54a7ce2258c765fe6f")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_54()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_28() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_29() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_30() == false) then
        break
      end
    end
  end

  function ifScriptFunc_64()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("1ed7ef953d5040c3ba275d062f7f27d2")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_33() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("23413b0253884622be8a5970eb59a69d")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("ee688cd3038940c29a5977161d7a48c2")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("fcdae51c451d4f87905ad787d931627c")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_66()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("39826dddf3fe411793f9fbf5c1bcda00")
    sleep(1.2)
    set_step_breakpoint()
  end

  function loopScriptFunc_4()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("f62c553f6d1f4b74851c9bccc2ae3a09")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("7215bdbb3fb2495aaefa511a459bf5d0")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_34()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("4baee5850a97452cb8f2e2afe82b07f0")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_74()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("3f4148c906514588ac461df01e63c5ed")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_36() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("8617d8970d1d49dcab4953dd54f301db")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("4ae8d32b417c4cd5bf7518419dad3509")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("6dde1ed739b24664b3f83ff1ff60990d")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_76()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("d7df3f1a5b20429f9391f295c96f2b04")
    sleep(1.2)
    set_step_breakpoint()
  end

  function ifScriptFunc_35()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_16() == false) then
        break
      end
    end
  end

  function ifScriptFunc_5()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("54fc8baca6684824aa941d05d8b702cd")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_55()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("3d41dfd98c46452bb8e0098f11db1d22")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("b44442c1bd6148f483e3656a453288db")
      add_waypoint({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262})
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("5d6cce94874249f483202ab75c4df113")
      add_waypoint({-3.999985, 0.242600, -2.499796, -2.049606, -1.613661, -3.263767})
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("d88d7111e1364aafad556b286ab17783")
      add_waypoint({-4.004170, 0.244111, -2.497304, -2.048737, -1.610444, -3.266434})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_5()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p2
      set_current_logic_tree_item("9d42f523e41d4f2eaa0dd7ed3984a008")
      move_line({-4.007093, 0.601109, -1.564165, 0.398142, -1.456842, -2.977940}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("22a48552945448fc8ef8c417336aaa1c")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_25()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("1af383b7178047bb9bc4e47b2a71d9c0")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_51()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("bed693b17b0d4a6fbbf194517553cf32")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_35()
    --(Logic tree item : Move) Move_vershin_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("8aee40be13a04116812a5f98c6279e71")
      move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("b2a11335c3df4ced96f1c41d59d68854")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_45()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("12ca144ab7a94ce198f1232322ea70da")
      add_waypoint({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262})
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("4b5ad48b77eb47a68efa80d2dff22ba5")
      add_waypoint({-3.999985, 0.242600, -2.499796, -2.049606, -1.613661, -3.263767})
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("d35c2be8aa5041c284cb52e160cb7eb2")
      add_waypoint({-4.004170, 0.244111, -2.497304, -2.048737, -1.610444, -3.266434})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_65()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_25()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_10() == false) then
        break
      end
    end
  end

  function ifScriptFunc_15()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_15()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("d69740258ddb438a9e2db70ca8e7a6e6")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("d03a703ed1784fa5a1537ebe6df56806")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_75()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_76()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("5069788b1628487abc2154bf4025c49b")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("941003cf83514077bd85ddb52dd88e84")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("5e441949d7034fe0b07901317abe0401")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_56()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_31() == false) then
        break
      end
    end
  end

  function loopScriptFunc_16()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("827f1136c02c43caa6d9186d2137eafc")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("15068ada55e64f86acff6f54e72b1f0e")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_66()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("b83b567a7a5542bbbfecf1cc0224978b")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("1b8bf4b52e4543ef9eaaa6bf8d177cb8")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("00494d4be28f41c3a75b0eb4ae4e7a17")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_26()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_12() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_13() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_14() == false) then
        break
      end
    end
  end

  function ifScriptFunc_16()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_17()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ch") == 0) then
      ifFuncRet = ifScriptFunc_18()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) > 0.8 or ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_19()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St1right
    --venec2Storona1right
      --(Logic tree item : Script) srvPosAbsRihtZub
      set_current_logic_tree_item("3f9edbc6ee5d40d297c561c7689d00da")
      blockScriptFunc_srvPosAbsRihtZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("5ed05358fc9f419186d565ef180935a6")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("b4d54c11443146098928845393d13026")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("30544f15ebcd4e4aa0f456f1b09d4162")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("9283e208d6f34b3da629dfd91c7f77d5")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b5cfe50c6df54334bd83ac06ac5dcf1a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("5fd2ab47a6854b6abbd57243e095d692")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f07d4f09e5734d9b96d439bb8923c594")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(get_modbus_io_status("M_F_faskaR24Ah"))}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("ea39a3ead86f47fcb400ba7fbe9eeac9")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("cf89b2bab9e847938445974a64182826")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_20()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1right_p1
        set_current_logic_tree_item("80f89fc109634a88a8b5ffc6f482a5e4")
        move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("ab7b29fe82a0484ba114ff9773e1a611")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_21()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.200000)
      set_end_maxacc(1.400000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1right_p1
        set_current_logic_tree_item("f4fce95543e9455095b72bc5b6d112a0")
        move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("613510ab368f497489bdfd019caa9b6b")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_22()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_25()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_11() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("f73aa8f577b94833bbd8ea73790a5a7d")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("fce0cc505b9b40b994eefb068844aaa7")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("1b50720c6fba426ca71d6e4616cf87cf")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("fb8b1580e8cc49e792870976930f9dad")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("f319e87214dc41fcacf69c937b429372")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("3f56efbd4700400cbf186b1b367970a7")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1right_p1
        set_current_logic_tree_item("58dcd42c35454974b3bc6f8be4442f4f")
        move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("d9eedbdae868442785007afe74b0276c")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_26()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("b64898aa894e4814931515c52608c285")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("675d7bd734c942e9ba7dadce03eca744")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_46()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("b1c572aa0224434ba6f30e2abbf9f1e5")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_36()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("19a0c2b4eaea4a2fac6763b1b81936bb")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_17() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("9eef9d79899945b983b1408a08a9e5dd")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("69c8cdb85e284813a741e868bd71849e")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("89a9cf3567b64e1fa8b6becd7466244d")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_38()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("bcaae19f28744bd1ad245deda5dd056d")
    sleep(0.8)
    set_step_breakpoint()
  end

  function ifScriptFunc_6()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("a2a8b73ebe7e45e6a4ae3aadb1dc9900")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_36()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("0e9daec51dba4212bd37c11890e8d083")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_75()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("919134d55e1746eda0a143b636cf6736")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_6()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p3
      set_current_logic_tree_item("4470b8e485a14d37ba0e80d7952f5f44")
      move_line({-4.005303, 0.599396, -1.567753, 0.396158, -1.455356, -2.976961}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("3758ab605f654e4b83a61075dbe5ef08")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_7()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR25Ch") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1left_p1
      set_current_logic_tree_item("0a27b938c92b4ec28078092b9c5f731f")
      move_line({-4.008722, 0.603361, -1.561256, 0.398913, -1.458210, -2.978835}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("72a7b283e65041d7ab600b06a61f7ba4")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_17()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("e1e80c5ead9546eeaf4010ab1364bd4f")
      add_waypoint({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697})
      --(Logic tree item : Waypoint) v2s1right_p2
      set_current_logic_tree_item("6a5bb2a8d6dd4e2e826d153f273a80e2")
      add_waypoint({-3.459856, 0.338889, -2.000741, -0.354933, -2.370610, -1.138413})
      --(Logic tree item : Waypoint) v2s1right_p3
      set_current_logic_tree_item("56cf419a7af34c36957dcdf5881aa12c")
      add_waypoint({-3.463165, 0.339938, -2.000980, -0.359346, -2.371930, -1.142756})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_27()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("d8a70f9c84264787b54b55fe84e71156")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("21186a298ec343d7891eb02c3af574ff")
      add_waypoint({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697})
      --(Logic tree item : Waypoint) v2s1right_p2
      set_current_logic_tree_item("fdd6ea0b802644b8a51daa46d7be62e5")
      add_waypoint({-3.459856, 0.338889, -2.000741, -0.354933, -2.370610, -1.138413})
      --(Logic tree item : Waypoint) v2s1right_p3
      set_current_logic_tree_item("db5beeaa299a4a8b9fc420f69ed2e23b")
      add_waypoint({-3.463165, 0.339938, -2.000980, -0.359346, -2.371930, -1.142756})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_37()
    --(Logic tree item : Move) Move_vershin_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("34322ffc825b4ee685a359e9ac31e4f2")
      move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("c5531c6ba976485aa1e8fc340163da69")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_27()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_54()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_55()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("94e5f076243f47a2a9ee1fc4602de49b")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("47834ff67e7e412aa684fcc77ea15b84")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_56()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("84ee701917b54295a8cb50be3e13b418")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_57()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("d1425dbda827427f8f00a880b63d24b5")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_67()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_34() == false) then
        break
      end
    end
  end

  function ifScriptFunc_37()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_7()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_0() == false) then
        break
      end
    end
  end

  function loopScriptFunc_17()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("5b876fd3a4ad478e819b5e61ab56ac9f")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_37()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("88af28ec3c7d434a850bb48d19143112")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_77()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_37() == false) then
        break
      end
    end
  end

  function ifScriptFunc_57()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_47()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("57e271d91092412abd0d4f0d874b46cf")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_58()
    --(Logic tree item : If) tochka_vershina
    if (false) then
      ifFuncRet = ifScriptFunc_59()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ch") == 0) then
      ifFuncRet = ifScriptFunc_60()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) > 0.8 or ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_61()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St1Vershin
    --Vershina zuba Venec2 Storona1
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("8c3853b9ee294e768b608c9720f366fb")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("c326e26442a44b208723dde3d0a16f87")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("e1e545e65f4749029a5f89dcbf416e30")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(-45), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("5eaa97259128435b88b71c65f7599a2f")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("aae21773ea544aebb9c3ad1305f71fb6")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_62()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.400000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1_vershina
        set_current_logic_tree_item("21d143cabf024721b20858db445d6ecf")
        move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("074ca9a1b3164528ae61c850acadb6b6")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_63()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1_vershina
        set_current_logic_tree_item("6e70e7f62b2046fa920e63e0f873e6b5")
        move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f4be238e821b48038999d6dee05265fa")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_64()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_67()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina
      init_global_move_profile()
      set_end_maxvelc(0.400000)
      set_end_maxacc(0.400000)
      set_relative_offset({0, 0, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1_vershina
        set_current_logic_tree_item("478f5e8f2c6344709ef5fcbfc35c1658")
        move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("95d16708a03a4294a4b0efb3163fe884")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Script) servoPosRelCentD
      set_current_logic_tree_item("7040ac8116344efbb5213019f0c7d62a")
      blockScriptFunc_servoPosRelCentD()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1_vershina
        set_current_logic_tree_item("2e016e483add48849c8f474e23aa867a")
        move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
        set_step_breakpoint()
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("3797c09d618a4829b96908fcbd8a2a8f")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("4a5cbd86a3bd4528b958bc878e705738")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("cb2c077d8876440a839d4ea667d2d342")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("83341d4faee440dbadbb45b3a7289d7e")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("40ac771a2a1045d28e2e286a46a97198")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("72d361bfa61b4fd2a39e08cba31e7812")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR284h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s1_vershina
        set_current_logic_tree_item("628c04cf074240639ce21db77eff36d1")
        move_line({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("0f1ac27f3a404bf68ec9934793257c88")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_8()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("f0c85a224d0043b7933d47155e6c1b69")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_1() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("169aec9b16c44e07a6683fb5cb790b70")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("a2afe982b23a43b886cff4d5fc2823db")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("1387cfaf5ab4464baec8df199e89b294")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_10()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("0ff9594a63534b3391c9ea28adf94627")
    sleep(0.8)
    set_step_breakpoint()
  end

  function loopScriptFunc_28()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("f216e55d7ca64889a0d329856c42e149")
      move_line({-3.996074, 0.242625, -2.502304, -2.052027, -1.616676, -3.261262}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("5fc4b6ae07d046939a928fbc85904eb3")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_8()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s1_Ztorca") - get_global_variable("V_D_sat3_v2s1_const") + get_modbus_io_status("M_F_faskaR268h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s1right_p1
      set_current_logic_tree_item("d8e8c8d292f743c9b639f1993ec52ebc")
      move_line({-3.457036, 0.338728, -2.000634, -0.352006, -2.369480, -1.134697}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("8b333b013404454781b857596da6fe2f")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_48()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("29e7db0a82414082a41cac152155ccbb")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_68()
    --(Logic tree item : If) tochka_vershina
    if (false) then
      ifFuncRet = ifScriptFunc_69()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_70()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_71()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2Vershin
    --Vershina zuba Venec2 Storona2
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("bf286d8dc2524c49963c0c09ed024e25")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("85e9b5b24aa5433a97bccd09e5c02081")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("74ce84ded441440fbec54a11795cbad6")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(-45), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("d9297a7215b34e468a0426e23b6cb53d")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("66e9a2fc60c44061bbf7551c233db11e")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_72()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("471ff1dcc54e4ac48ee8dbe7b37d74f9")
        move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("c9cbee89e07f43719d3688efe449f8d3")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_73()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("8b4d9a166a4649bfad10065b3c4a70cd")
        move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("2510cbdb3229475eb7bda22bde61fae0")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_74()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_77()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina
      init_global_move_profile()
      set_end_maxvelc(0.400000)
      set_end_maxacc(0.400000)
      set_relative_offset({0, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("e4beecc8a2e5499dbdbd7a563a3aeaf7")
        move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b58d70284bc84ef78cf5dc840ad88b10")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Script) servoPosRelCentD
      set_current_logic_tree_item("5be7eca475c54b66ab016a45efc33748")
      blockScriptFunc_servoPosRelCentD()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("eccb334f8b484a118e6f852e4fe98401")
        move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
        set_step_breakpoint()
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("564630ac28bc4284887de705abe0bf17")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("b0b897c8201b498da3a193edb507d513")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("2c21668595c14f31b0be489b7020f592")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("69dd0bf6bef749e8af1be10bbb18be38")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("7465ecd027da42acaa02cf055f552f10")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("35ed552718a24162a45d17447e736030")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("350f94bafb4445779f2a102741f43961")
        move_line({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("cc01cf4ea5d24a93b5b355d859bdb9d3")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_18()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("ae4cfd9187404548b01333ae3482a152")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("a4870e81e6184f12bf0d4aa8a0d61a43")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_28()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_15() == false) then
        break
      end
    end
  end

  function ifScriptFunc_18()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("32a1c7b819e04b2ab7e6cedff74351bc")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_38()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("ce2fea22c0c644408181c58025bcb6de")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("18f685ede9034696b6fa01b03418d67f")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("415c153aab7347878eb163c468fccb76")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_39()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_18() == false) then
        break
      end
    end
  end

  function ifScriptFunc_9()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_19()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_40()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_41()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("c79af18abfff442a9f4a03c7e65eb921")
      move_line({-4.134700, 0.060779, -2.309488, -0.437618, -0.749327, -1.564898}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("032b2f07b10d441c93eec422c4efb7cc")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_42()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("456750642f264d6ca07dbb080443fb92")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_43()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("2cdab1fd4e024aa5a4cd734cafe1d1b3")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_19()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("95606bed44d447ff900ebc3e684d1249")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_29()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat3_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("047d03a1957d4113be51af36791afbe7")
      move_line({-3.999985, 0.242600, -2.499796, -2.049606, -1.613661, -3.263767}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("7dec3ef26fdd4bd5a8b71f2454eb6330")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_9()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("f49c23ad70ed4cd79f1edcc90faedb15")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_23()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("d41f392c7e444a3eae0ebc8dbf5c47ed")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_29()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_49()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_24() == false) then
        break
      end
    end
  end

  function ifScriptFunc_59()
    --(Logic tree item : Move) Move_vershina
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({10.471976,10.471976,15.707963,10.471976,10.471976,10.471976})
      --(Logic tree item : Waypoint) v2s1_vershina
      set_current_logic_tree_item("0043831913824976a7d94d9142883b68")
      move_joint({-3.763529, 0.688155, -1.359016, 0.207478, -1.995972, -3.603251}, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_69()
    --(Logic tree item : Move) Move_vershina
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({10.471976,10.471976,15.707963,10.471976,10.471976,10.471976})
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("fd4d14e989c340c0af45116a1bf6c35c")
      move_joint({-3.857555, 0.174400, -2.515941, -1.765891, -1.089140, -0.545476}, true)
      set_step_breakpoint()
  end

--(Logic tree item : Procedure_Program) Procedure_Program
  --(Logic tree item : Script) preFaskaScript
  set_current_logic_tree_item("4ea31c1d56b0487e947d05edfddde3f5")
  blockScriptFunc_preFaskaScript()
  set_step_breakpoint()
  --(Logic tree item : If) If_inputDataInCorect
  if (get_modbus_io_status("synhr_c121h") == 1) then
    ifFuncRet = ifScriptFunc_0()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : Set) Set_tool
  set_current_logic_tree_item("7a83d9215d164c5299a7ee43996adea3")
  set_tool_kinematics_param(get_tool_kinematics_param("drillDisc"))
  set_tool_dynamics_param(get_tool_dynamics_param("drillDisc"))
  set_step_breakpoint()
  --(Logic tree item : Block_Comment) Block_constant
  --pereopredelit` znacheniya constant
    --(Logic tree item : If) If_pereopredelit
    if (false) then
      ifFuncRet = ifScriptFunc_1()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
  --(Logic tree item : If) If_ven2St1_left
  if (( get_modbus_io_status("faskaR255h") == 1 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B8h") == 0   ) then
    ifFuncRet = ifScriptFunc_2()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St1_right
  if (( get_modbus_io_status("faskaR255h") == 1 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B9h") == 0   ) then
    ifFuncRet = ifScriptFunc_16()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_left
  if (( get_modbus_io_status("faskaR255h") == 2 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B8h") == 0) then
    ifFuncRet = ifScriptFunc_30()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_right
  if (( get_modbus_io_status("faskaR255h") == 2 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B9h") == 0   ) then
    ifFuncRet = ifScriptFunc_44()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St1_vershina
  if (( get_modbus_io_status("faskaR27Dh") == 1 or get_modbus_io_status("faskaR27Dh") == 3 ) and get_modbus_io_status("manSc_c1BAh") == 0) then
    ifFuncRet = ifScriptFunc_58()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_vershina
  if (( get_modbus_io_status("faskaR27Dh") == 2 or get_modbus_io_status("faskaR27Dh") == 3 ) and get_modbus_io_status("manSc_c1BAh") == 0) then
    ifFuncRet = ifScriptFunc_68()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : Set) Set_zeroPUU
  set_current_logic_tree_item("9ee58ae501e94e39bc6a8304ef52e68f")
  set_modbus_io_status("50E_PR", 3)
  set_step_breakpoint()
  --(Logic tree item : Wait) Wait_PR3
  set_current_logic_tree_item("34e4cef503ae4453a326d2718ffbec1b")
  while (not (get_modbus_io_status("50E_PR") == 20003)) do
    sleep(0.01)
  end
  set_step_breakpoint()
