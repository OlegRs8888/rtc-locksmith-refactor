--Procedure Program

--block script function definition
  function blockScriptFunc_sendCoordToSCADA()
    -- параметры системы координат поворотки
    calMet, jP1, jP2, jP3, tP = get_user_coord_param("povorotnayaOsReal")
    -- параметры системы координат инструмента
    posDiscTool, oriDiscTool = get_tool_kinematics_param("drillDisc")
    -- vzyal tekushuyu posiziyu
    wpCurr = get_current_waypoint()
    jntCurr = {wpCurr.joint.j1, wpCurr.joint.j2, wpCurr.joint.j3, wpCurr.joint.j4, wpCurr.joint.j5, wpCurr.joint.j6}
    posCurr, oriCurr = base_to_user(jntCurr, posDiscTool, oriDiscTool, calMet, jP1, jP2, jP3, tP)
    set_modbus_io_status("M_F_faskaR26Ah", posCurr[1]*1000)
    set_modbus_io_status("M_F_faskaR26Ch", posCurr[2]*1000)
    set_modbus_io_status("M_F_faskaR26Eh", posCurr[3]*1000)
  end  --function blockScriptFunc_sendCoordToSCADA()

  function blockScriptFunc_preFaskaScript()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    faska_m = require("faska_module")
    s_m = require("service_module")
    mill_m = require("milling_module")
    
    local function preStartFaska()
        -- sbros флага состояния выполнения
        set_modbus_io_status("synhr_c121h", 0)
        -- данные операции притупления фаски
        P150_Ddisc, P151_offsetDisc, P152_offsetTime, P153_printDbgFlag, P154_backDisk, P155_zausDisk, P156_operationX, P157_glavUgolX, P158_glavUgolY, P159_glavUgolZ, P160_perevorotyX, P161_saftyX, P162_reykaZubleft, P163_reykaZubright, P164_operationY, P165_venec1Storona, P166_venec2Storona, P167_venec3Storona, P168_IDstring, P169_v1s1leftCorrectorZ, P170_v1s2leftCorrectorZ, P171_v2s1leftCorrectorZ, P172_v2s2leftCorrectorZ,     P173_v3s1leftCorrectorZ, P174_v3s2leftCorrectorZ, P175_v1s1rightCorrectorZ, P176_v1s2rightCorrectorZ,   P177_v2s1rightCorrectorZ, P178_v2s2rightCorrectorZ, P185_v3s1rightCorrectorZ, P186_v3s2rightCorrectorZ, P187_venec1StoronaV, P188_venec2StoronaV, P189_venec3StoronaV = faska_m.getDataFaska()
        -- proverka dannyx
        faska_checkStatusDetect = faska_m.checkDataFaska(P150_Ddisc, P151_offsetDisc, P152_offsetTime, P153_printDbgFlag, P154_backDisk, P155_zausDisk, P156_operationX, P157_glavUgolX, P158_glavUgolY, P159_glavUgolZ, P160_perevorotyX, P161_saftyX, P162_reykaZubleft, P163_reykaZubright, P164_operationY, P165_venec1Storona, P166_venec2Storona, P167_venec3Storona, P168_IDstring, P169_v1s1leftCorrectorZ, P170_v1s2leftCorrectorZ, P171_v2s1leftCorrectorZ, P172_v2s2leftCorrectorZ,     P173_v3s1leftCorrectorZ, P174_v3s2leftCorrectorZ, P175_v1s1rightCorrectorZ, P176_v1s2rightCorrectorZ,   P177_v2s1rightCorrectorZ, P178_v2s2rightCorrectorZ, P185_v3s1rightCorrectorZ, P186_v3s2rightCorrectorZ, P187_venec1StoronaV, P188_venec2StoronaV, P189_venec3StoronaV)
        -- если данные не корректные, то выход с кодом -1
        if faska_checkStatusDetect ~= 0 then
            -- установ флага состояния выполнения
            set_modbus_io_status("synhr_c121h", 1)
            s_m.beep(1.5)
            print("")
            print("<<<<<<<<<<<<< preStartFaska >>>>>>>>>>>>>")
            print("<<<<< некорректные входные данные. kод выхода -1 >>>>>>>>>>")
            print("<<<<<<<<<<<<< preStartFaska >>>>>>>>>>>>>")
            print("")
            return
        end
        -- читаю Z координату точек касания(povorotka, tool - probeRobot)
        v1s1_Ztorca, v1s2_Ztorca, v2s1_Ztorca, v2s2_Ztorca, v3s1_Ztorca, v3s2_Ztorca = mill_m.getXcoordObmera()
        set_global_variable("V_D_v1s1_Ztorca", v1s1_Ztorca)
        set_global_variable("V_D_v1s2_Ztorca", v1s2_Ztorca)
        set_global_variable("V_D_v2s1_Ztorca", v2s1_Ztorca)
        set_global_variable("V_D_v2s2_Ztorca", v2s2_Ztorca)
        set_global_variable("V_D_v3s1_Ztorca", v3s1_Ztorca)
        set_global_variable("V_D_v3s2_Ztorca", v3s2_Ztorca)
    end
    --*************************основной код************************************
    preStartFaska()
    --*************************основной код************************************
  end  --function blockScriptFunc_preFaskaScript()

  function blockScriptFunc_check_mk312DO()
    function bit(p)
        return 2 ^ (p -  1)
    end
    function hasbit(x , p)
         return x % (p + p) >= p
    end
    
    inp = get_modbus_io_status("mk312_DO")
    bitNum = get_global_variable("V_I_DIOnumber")
    res = hasbit(inp , bit(bitNum))
    set_global_variable("V_B_mk312DOstate", res)
  end  --function blockScriptFunc_check_mk312DO()

  function blockScriptFunc_servoPosRelCentr()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    s_m = require("service_module")
    fastSpeedServo = 655426 --A0042h - rel, speed1500, acc/dcc200
    
    P126_modulCentrVenec = get_modbus_io_status("M_F_globalR1B0h") -- модуль центрального венца;
    P126_modulCentrVenec = math.abs(P126_modulCentrVenec) -- нормализация, убираю знак
    -- otnositel`noe peremeshenie na velichinu odnogo zuba central`nogo venca
    set_modbus_io_status("M_L_PR13param", fastSpeedServo)  --A0042h - rel, speed1500, acc/dcc200
    set_modbus_io_status("M_L_PR13coord", -P126_modulCentrVenec * math.pi * 1000)
    s_m.servoGo(13) -- быстро назад
  end  --function blockScriptFunc_servoPosRelCentr()

  function blockScriptFunc_srvPosAbsLeftZub()
    local function ServoPos(SrvP)
        -- PR97param - 851970 - D0002h, ABSpos, speed2300, acc200
        set_modbus_io_status("M_L_PR97coord", SrvP*1000) --
        sleep(0.25)
        set_modbus_io_status("50E_PR", 97) --
        i = 0
        while (i~=20097) do
            i = get_modbus_io_status("50E_PR") --
        end
    end
    
    P162_reykaZubleft = get_modbus_io_status("M_F_faskaR24Eh") --Р162, позиция рейки, зуб слева; мм, float, 32bit
    P162_reykaZubleft = -math.abs(P162_reykaZubleft ) -- нормализация, убираю знак
    -- позиция рейки Zub Sleva, absolutnyaya poziciya
    ServoPos(P162_reykaZubleft)
  end  --function blockScriptFunc_srvPosAbsLeftZub()

  function blockScriptFunc_servoPosRelCentD()
    package.path = "/root/AuboRobotWorkSpace/teachpendant/share/teachpendant/script/?.aubo"
    s_m = require("service_module")
    workSpeedServo = 131138 -- 20042h - rel, speed100, acc/dcc200
    
    P126_modulCentrVenec = get_modbus_io_status("M_F_globalR1B0h") -- модуль центрального венца;
    P126_modulCentrVenec = math.abs(P126_modulCentrVenec) -- нормализация, убираю знак
    P125_zCentrVenec = get_modbus_io_status("globalR1AFh") -- z центрального венца;
    P125_zCentrVenec = math.abs(P125_zCentrVenec) -- нормализация, убираю знак
    P125_zCentrVenec = math.floor(P125_zCentrVenec) -- нормализация, только целая часть
    -- otnositel`noe peremeshenie na velichinu delitel`nogo diametra central`nogo venca
    set_modbus_io_status("M_L_PR13param", workSpeedServo)  -- 20042h - rel, speed100, acc/dcc200
    set_modbus_io_status("M_L_PR13coord", -P126_modulCentrVenec * math.pi * 1000 * P125_zCentrVenec)
    s_m.servoGo(13) -- pereeezd
  end  --function blockScriptFunc_servoPosRelCentD()

  function blockScriptFunc_set_mk311DO()
    function bit(p)
        return 2 ^ (p -  1)
    end
    function hasbit(x , p)
         return x % (p + p) >= p
    end
    function setbit(x , p)
         return hasbit(x , p) and x or x + p
    end
    function clearbit(x , p)
         return hasbit(x , p) and x-p or x
    end
    
    inp = get_modbus_io_status("mk311_DO")
    bitNum = get_global_variable("V_I_DIOnumber")
    bitState = get_global_variable("V_B_mk311DOstate")
    if bitState == true then 
        res = setbit(inp , bit(bitNum))
    else 
        res = clearbit(inp , bit(bitNum))
    end
    set_modbus_io_status("mk311_DO", res)
  end  --function blockScriptFunc_set_mk311DO()

  function blockScriptFunc_srvPosAbsRihtZub()
    local function ServoPos(SrvP)
        -- PR97param - 851970 - D0002h, ABSpos, speed2300, acc200
        set_modbus_io_status("M_L_PR97coord", SrvP*1000) --
        sleep(0.25)
        set_modbus_io_status("50E_PR", 97) --
        i = 0
        while (i~=20097) do
            i = get_modbus_io_status("50E_PR") --
        end
    end
    
    P163_reykaZubright = get_modbus_io_status("M_F_faskaR250h") --Р163, позиция рейки,зубсправа;мм,float, 32bit
    P163_reykaZubright = -math.abs(P163_reykaZubright) -- нормализация, убираю знак
    -- позиция рейки Zub Sleva, absolutnyaya poziciya
    ServoPos(P163_reykaZubright)
  end  --function blockScriptFunc_srvPosAbsRihtZub()

--script function definition
  function ifScriptFunc_40()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_20() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_21() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_22() == false) then
        break
      end
    end
  end

  function ifScriptFunc_110()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("92560124b36d4d5c9c624b4c30de5bb5")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_20()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("222565823f98475aa637b5a3c6bfc466")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("21ecba32341b4516a9b5f840a3935bbd")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_10()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("6c6df6055dbf4ddf806ed92f59a6bae1")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("8ff2d2e295ff4b4ca5f36ab810cc720d")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_20()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("18695d996f704e89b4e6c5355c112fa2")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_100()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("563edfbeaaac4e28975378e92be39b23")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_30()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_31()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_32()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_33()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2left
    --venec2Storona2left
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("c6b3e59376244d7dae2566c6d0b81d9e")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("7631f1e0dbeb4510b1abbc493f95d835")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("fe6ce96810384eb1b1f12757ed8edd99")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("60d408aed6b24e22a63e6e3092f79a22")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0 -  get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("e97d0358524b4058947b352b2f535670")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("c73f1f88d3684deaadfd9bcb03f44449")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("9974226fe23044ef83078564e06a52a0")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("12580da0ec124a50a81853d4ff4b2cd3")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(get_modbus_io_status("M_F_faskaR24Ah") / 4)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("9aae84ed09424ac48eac73d1e8a6bf22")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b617ecd52933405c956bdac5d67aaaf9")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_34()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("1403e74e6dd44f2f9f0c191f0306dfbc")
        move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("bb6985026fd74248a1053c165ad32ea1")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_35()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("a33f860e13a848128bfb24adf520e684")
        move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("3e40b9e8d23349389572468873f87394")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_36()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_39()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_19() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("c034d0488e164393901b706bac9bc85e")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("3fc2afe328b64708b996061524509050")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("221f59f5432f4048abccc0bdb7b1b97e")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("7e0f5f16ca32456587a05d3bbcbf8635")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("59c38717b88c410db2df2d6f5edca4c4")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("cc6fa5bb87bc49eab813bfe4c6bc1d58")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2left_p1
        set_current_logic_tree_item("1fe294ef3db6487994c56139731c81dc")
        move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("13ff7f37e04b4a85b2f6a8409bdf1a98")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_70()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_39() == false) then
        break
      end
    end
  end

  function loopScriptFunc_40()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("ca8460ebc21c45cb9dde68c813b36990")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("c4e850dbf94e4401838e31218c31f2e4")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_90()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("7064924e46994c56b33c5fca712c7ffd")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_80()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("536b7b95e1d942e1948afc6619c68e5c")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("2e0e3c5a6f8e4ef6b2f70b7418f7270e")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("c04a8c1a7a6a41359f504154372e49b0")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function loopScriptFunc_30()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p3
      set_current_logic_tree_item("39c6e6f83ec04daebf649d7693e9aa47")
      move_line({-4.115945, 0.075374, -2.303382, -0.465572, -0.742038, -1.538617}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("c16794f3cbf346b4ae6ba27fa81639a0")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_50()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("46ae40d1b55e43e888b9d2fa9057f065")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_25() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("336bf678dad14839b156de01d06831d1")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("edaaebcf23f143309ca42678ff7d6477")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("08822745944544f8ab8184acdc6e0653")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_52()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("247d9839b23645eaa52c10867e69174d")
    sleep(0.8)
    set_step_breakpoint()
  end

  function ifScriptFunc_60()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("87f05098bf7144569ce95ff1cbd33671")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_50()
    --(Logic tree item : Move) Move_vershin_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v1s1_Ztorca") - get_global_variable("V_D_sat6_v1s1_const") + get_modbus_io_status("M_F_faskaR288h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1_vershina
      set_current_logic_tree_item("3a5627ab9c92475fb25763d5a59799d7")
      move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("fb12fec08d664b2e9b971e20bbb0fa38")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_0()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("671e5ba194e54d128225cecc30fb8b34")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("e90ceac73b734a36ae7d9631d706f095")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_10()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("b083e0b0bce5453c9a4136cbffc3aa50")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("361c6a1b9085492db89e3ba25565de48")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("b6fc84a497a840b282f6c1bbfb8f0550")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_0()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("26cec97f88eb40b7a238297b92617b78")
    popup_message(2, "preFaskaScript: необрабатываемое исключение. Продолжение работы невозможно. Проект будет остановлен", true)
  end

  function loopScriptFunc_1()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("c811a70e44fc4101acd8b575e25deb33")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_9()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("02080942cba94348ab8ba0aaf80c317d")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_21()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("f1aa6747648f4bf7a7d53dde5e8689da")
      move_line({-4.097796, 0.094738, -2.283460, -0.483831, -0.736111, -1.513153}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("0ca62ec17fe64869879860de2545044b")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_81()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_42() == false) then
        break
      end
    end
  end

  function loopScriptFunc_41()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("4fbe336048a94235a32620ff3d3bad7a")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_79()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("2066a8a73440480e8cfc78ade13b9d58")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_31()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("e36c2a7300024b928c6fb2e283ce8f75")
      add_waypoint({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018})
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("2d8bfa1ab4d648dc92fef2fa31ee9526")
      add_waypoint({-4.097796, 0.094738, -2.283460, -0.483831, -0.736111, -1.513153})
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("336f8de62dc64f618fb8d39e277e44fe")
      add_waypoint({-4.095757, 0.094716, -2.286399, -0.488886, -0.735462, -1.510270})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_41()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("b5d4ee6b580842b49140c4a18b2ff3b1")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("732cff30142949cfab7e1d85dc04c171")
      add_waypoint({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018})
      --(Logic tree item : Waypoint) v2s2left_p2
      set_current_logic_tree_item("495d2dff775447febdb98a2a25b06670")
      add_waypoint({-4.097796, 0.094738, -2.283460, -0.483831, -0.736111, -1.513153})
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("8058909852064c38920cd82a713c089f")
      add_waypoint({-4.095757, 0.094716, -2.286399, -0.488886, -0.735462, -1.510270})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_101()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_51() == false) then
        break
      end
    end
  end

  function ifScriptFunc_61()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("b1fd0de5dfa3456b8ac4d3ef425bc41c")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_51()
    --(Logic tree item : Move) Move_vershin_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("51659c2486964744981fab5756abbe94")
      move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("7d2e289ec9d24ea29c97d0a07916e83b")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_21()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_8() == false) then
        break
      end
    end
  end

  function ifScriptFunc_11()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_2() == false) then
        break
      end
    end
  end

  function ifScriptFunc_91()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_48() == false) then
        break
      end
    end
  end

  function loopScriptFunc_31()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("266597a0907e4561968a1f4afb7a3b10")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("882e4673e4534d0383c011081cb8a899")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_11()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_26()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_27()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("9f36ce5377514232b8efc9a5c8e719cd")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("6fb3dcf455994d72b5118d6ab27994b2")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_28()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("ada93f1674e34d9092baf19b0fedc6b5")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_29()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("7449c2b90fd946f8b2b917821e636faf")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_51()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_71()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_111()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_54() == false) then
        break
      end
    end
  end

  function ifScriptFunc_1()
    --(Logic tree item : Set) Set_v1s1
    set_current_logic_tree_item("6702f578c21d474a84bffceae0388138")
    set_global_variable("V_D_sat6_v1s1_const", get_global_variable("V_D_v1s1_Ztorca"))
    --(Logic tree item : Set) Set_v1s2
    set_current_logic_tree_item("d0dc9456e87c41159c2f0eecc9d35f8f")
    set_global_variable("V_D_sat6_v1s2_const", get_global_variable("V_D_v1s2_Ztorca"))
    --(Logic tree item : Set) Set_v2s1
    set_current_logic_tree_item("73bde172ef3c4f2eb6f5f9e2d04e7785")
    set_global_variable("V_D_sat6_v2s1_const", get_global_variable("V_D_v2s1_Ztorca"))
    --(Logic tree item : Set) Set_v2s2
    set_current_logic_tree_item("dbbfc66fab2b4010ae8a5fcd7a4460c8")
    set_global_variable("V_D_sat6_v2s2_const", get_global_variable("V_D_v2s2_Ztorca"))
    --(Logic tree item : Set) Set_v3s1
    set_current_logic_tree_item("045320dc366048bf9d58e2a3c9bbb4ca")
    set_global_variable("V_D_sat6_v3s1_const", get_global_variable("V_D_v3s1_Ztorca"))
    --(Logic tree item : Set) Set_v3s2
    set_current_logic_tree_item("c852a9b744b04f33bc806afdb4011b5d")
    set_global_variable("V_D_sat6_v3s2_const", get_global_variable("V_D_v3s2_Ztorca"))
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("0ab333ec66d64e8b9c66fb801a9247e2")
    popup_message(0, "constanty pereopredeleny", true)
  end

  function loopScriptFunc_32()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("252aac15ba4d4096ad0a7ed5d76afca7")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("93d5e30b1242473f8f6e2157d703c4cb")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_52()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("7ec6e468b309423695f13d047f44426f")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("1dfd5d96f15b486db24d7ce4cd17b340")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("7672ee1e1ea04c548a1ea42e7d2fd976")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_82()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_44() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_45() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_46() == false) then
        break
      end
    end
  end

  function ifScriptFunc_72()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_73()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ah") == 0) then
      ifFuncRet = ifScriptFunc_74()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) > 0.8 or ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_75()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St2right
    --venec3Storona2right
      --(Logic tree item : Script) srvPosAbsRihtZub
      set_current_logic_tree_item("f7a732c40d034555965f6fef038028e4")
      blockScriptFunc_srvPosAbsRihtZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("c69f4195042b476abdf085b7a878e7db")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("2d8157b72f2048339ae8f576e75ca2d0")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("7a824c1466ca403bbcc8ce4c83a886c5")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("5dca34666dfb427eb1fbfd5c99b0c740")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("0dbd663d9edf4ca7991da29d1ff20a1a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("ca52ab5b5d7341008fdf2b756bb37a93")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("6d7bad3e85ad4fedb29e4512383122b9")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR24Ah") + 15)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("6004f373fb104e50bea3e0275b84a15a")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("e3072107143746bdb2750f02e95e69aa")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_76()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2right_p1
        set_current_logic_tree_item("f020c7ecf8fb45ffbf08bcdb0ddc3f4b")
        move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b3094495a22c4cafa96d001322d9004c")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_77()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2right_p1
        set_current_logic_tree_item("5be54fa6165d40d7a13b77ffdaaa16a1")
        move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("2c33d0440cb24c0c8ae34f97da751604")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_78()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_81()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_43() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("63813e2e293a4ef7ab8a07b1c015366c")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("9aa686acb606447ea906aa04ed372f3b")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("568884a560cc4e4b8d38078337e6c9bc")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("5f460bb711e4425385ae6d0742ee1f7f")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("3c75c6ec0c1346faa6e68937eac2ed38")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("8b12554a4383443985ed8d393893117f")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2right_p1
        set_current_logic_tree_item("ad70c16db1bb4eaf94ee0efecf6c7042")
        move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("ce01225be2ff4437b49c0e4adb321625")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_112()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("89ed57a04a6d461fb260aaf20869bb97")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_55() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("36821655631344bcb9823eae1d2691e1")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("9e405c8d63b74c2080fe845f71af2d84")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("f15c9b69471c47a5b7cd6d6253f99527")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_114()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("b24c52ec74c748ffbc8e93a4c3ab8bb3")
    sleep(1.2)
    set_step_breakpoint()
  end

  function ifScriptFunc_92()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("e20e70f24cee45699db065a9ac5ef4cf")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_49() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("a77b85d3f8034212be8a6d62eb19bf2a")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("d8c201f4919c4b928dbc5bcf10b54bf1")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("2bfa238369c74c1ca8e06095f9c50751")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_94()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("1cb62d74190c433cac28ce99898202a7")
    sleep(1.2)
    set_step_breakpoint()
  end

  function ifScriptFunc_62()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("db4f5c72f70a40e7b007b3f94409e023")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_22()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p3
      set_current_logic_tree_item("50c2fc78b9cc44c8a534f46350d99d58")
      move_line({-4.095757, 0.094716, -2.286399, -0.488886, -0.735462, -1.510270}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("93ad5cca6e674653a14d866b3c4ee770")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_32()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("4efe38439a2e4c97bd22b4cedbae875e")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_22()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("e4da9616a1954b2f9ce426dfa996eea1")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_9() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("fc6e0ebed9644cc295eeb20e78e8d7ef")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("9e0c67cd815348fabbadcd9766c39a80")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("956c966aceab4d6f8af641af143a5508")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_24()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("97a1a16c61db4489b6b2315180a993aa")
    sleep(0.8)
    set_step_breakpoint()
  end

  function loopScriptFunc_12()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("4195c0803a914283a287f9e37c9c3cfc")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("038d26323540491f8a8c80ae504c48c6")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_42()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("83770b7257674efb8eee728845eb3a5d")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("751ec16f68dc40fead0853c7959596bb")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_12()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_4() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_5() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_6() == false) then
        break
      end
    end
  end

  function ifScriptFunc_42()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_23() == false) then
        break
      end
    end
  end

  function ifScriptFunc_2()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_3()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Dh") == 0) then
      ifFuncRet = ifScriptFunc_4()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) > 0.8 or ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_5()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St1left
    --venec3Storona1left
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("e67514974e004d61a1479683730870b2")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("f8631882e001402c9a12f65b146d44e0")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("a18039232dbe4cbcb88bf3c790f98c6b")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("311e88cfd6c449cd9c0005b1e7e7e7c6")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0 -  get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("ca42d1b34ee94dc293106b3843b0c50a")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("af2876a485aa454b82e05c988a404fc9")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("55c019b6441743038607dcfc65dec5fe")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("78807b05ff7d4b17b01a10509462607a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR24Ah"))}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("e334916980a8433db914a48d921571be")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("73101130bdef46e0a34263da6941c56e")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_6()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1left_p1
        set_current_logic_tree_item("c27e25788e9147fab80d2cb3cc81906a")
        move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("c96e432516084848b74d8bcb4236aa03")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_7()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.200000)
      set_end_maxacc(1.400000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1left_p1
        set_current_logic_tree_item("8b8f8f388f3249bb81a03899a0863552")
        move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f283f7f83b614bb58c0c62c6e192f7e8")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_8()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_11()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_3() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("610df950ec0546ee86b63306dd09c50f")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("ef88fde23b3c4ba384244c80719d19bb")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("d37b1acdc64744c594dc0714a3987b2f")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("8ba7f3e1a1c44538a02471368e706bd4")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("c0acfa3dc084448d879808ff59a1d616")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("9b1292b6b32a4fd79ad0e6b24b142dcd")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1left_p1
        set_current_logic_tree_item("58173b5a3db04f05842cd7a87ce3527a")
        move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("08bb73b606794c32961f280222c36a8b")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_2()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("4cf3df5338f04188b34e2022396aaf1f")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("1089829683a548afb79e8cdba3f84168")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_102()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("7e4c8efcb31440a08daa6b1abc9cb14b")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_52() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("f4a9081d3c244a1c8b4d9585015530b9")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("6969359f645944e5a97bf2c7074e2071")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("4bf3543bc0ac4e28865dc8c27b5d513e")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_104()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("010e4129b1464b1c94094a0653b67fc3")
    sleep(1.2)
    set_step_breakpoint()
  end

  function loopScriptFunc_52()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("aa0fa4804a1645359afdd677c9716bda")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_103()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("5fa315d4578346118a2259539c61e901")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_93()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_83()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("e928c73a11774e7c814d53d3c87267a6")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("7a5b0a52b0aa4b9ca80a81340c051618")
      add_waypoint({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917})
      --(Logic tree item : Waypoint) v3s2right_p2
      set_current_logic_tree_item("942d353ff4504a73b4754142a1662f62")
      add_waypoint({-3.981127, 0.260122, -2.479080, -2.045802, -1.628131, -3.251769})
      --(Logic tree item : Waypoint) v3s2right_p3
      set_current_logic_tree_item("4500b384eccd4356ac082d12afbdbe81")
      add_waypoint({-3.984007, 0.263339, -2.477859, -2.047904, -1.625916, -3.253611})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_53()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_26() == false) then
        break
      end
    end
  end

  function loopScriptFunc_3()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_12()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_13()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("904b99a3a21c4758930bc0aa82ca7c1e")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("daeb300bd5aa4aaaa4d61878874c7977")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_14()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("868ff86677eb41038a593c859cca7e10")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_15()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("5b32099b4cb64de8971e434bfec52745")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_113()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_43()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_43()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_82()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_83()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("6789aff441cf4e79ba4efbfa7d79437d")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("c43b3e26f9cb4bc08e0e80ed85a1ede2")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_84()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("da238724d0c442de91bfb2af383ee5a6")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_85()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("287f28a4c01549c395d6255e1ea0d0be")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_13()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("99ec317b1cbe46e1ad087239e874836b")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("ddc8cc1ed9ee42059772a479d579fa53")
      add_waypoint({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764})
      --(Logic tree item : Waypoint) v3s1left_p2
      set_current_logic_tree_item("62a8a7a27de946d49a8f9a3fe98875de")
      add_waypoint({-3.990206, 0.550615, -1.605908, 0.292998, -1.532660, -2.992818})
      --(Logic tree item : Waypoint) v3s1left_p3
      set_current_logic_tree_item("1c3fd3d0accb4c2c9b018d1da519422b")
      add_waypoint({-3.988727, 0.549936, -1.609053, 0.290497, -1.531523, -2.991879})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_33()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("4a9a9bf161e34532b5adffecd8cb1a94")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_65()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("f80e543113244c0297254bff5715e756")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_53()
    --(Logic tree item : Move) Move_vershin_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("b21660908dc94479b9e98ef1688a3ecd")
      move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("d38efe58c064417f92e90cac59619151")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_3()
    --(Logic tree item : Move) Move_initDrilDisk180
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
    set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
      set_current_logic_tree_item("91cbe621664d44b5a9faeab22261bc9d")
      move_joint(get_global_variable("V_P_drillDisk180"), true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("37eb376924fb4a728de1a70ad2814273")
      add_waypoint({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764})
      --(Logic tree item : Waypoint) v3s1left_p2
      set_current_logic_tree_item("6bf44cd6ad6a42a28e87f2e2ee461601")
      add_waypoint({-3.990206, 0.550615, -1.605908, 0.292998, -1.532660, -2.992818})
      --(Logic tree item : Waypoint) v3s1left_p3
      set_current_logic_tree_item("29d462ba0b774599ae9f038d5a3d95dd")
      add_waypoint({-3.988727, 0.549936, -1.609053, 0.290497, -1.531523, -2.991879})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_33()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("a9c3457b3f55442fb52aa6aa04baa6b3")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_13()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p2
      set_current_logic_tree_item("9a81c56b19e04c4f9d630ee45874195f")
      move_line({-3.466631, 0.326741, -2.028916, -0.377165, -2.373335, -1.147334}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("2cc142e0997b4dcfaa8844e39963200d")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_63()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_32() == false) then
        break
      end
    end
  end

  function ifScriptFunc_73()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("7dc20573e143416d83b235a719ba2ac3")
      add_waypoint({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917})
      --(Logic tree item : Waypoint) v3s2right_p2
      set_current_logic_tree_item("0717dbea4a9b4296943b26fa40d1da20")
      add_waypoint({-3.981127, 0.260122, -2.479080, -2.045802, -1.628131, -3.251769})
      --(Logic tree item : Waypoint) v3s2right_p3
      set_current_logic_tree_item("af59099609a841bda13f895379ad2bd6")
      add_waypoint({-3.984007, 0.263339, -2.477859, -2.047904, -1.625916, -3.253611})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_23()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_103()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_23()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("cad75c88fe0c4ac49b648cf86691781d")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("8124d8ccb3dd41f39e180b025487e88d")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_84()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_47() == false) then
        break
      end
    end
  end

  function ifScriptFunc_64()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("a385a3a45fd64a27a809c46535ce2101")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_33() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("0fd1c0ae027442c0ac2f55f4c00fcc44")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("16b6ad6a9e4a486e886fd4397e38dbb5")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("abb2cffe0714498498e4a86ddeb620cc")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_66()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("867e6d9cc29a44849ea0cbb65f18e2ff")
    sleep(0.8)
    set_step_breakpoint()
  end

  function ifScriptFunc_54()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_28() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_29() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_30() == false) then
        break
      end
    end
  end

  function ifScriptFunc_74()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("407a0fc955e1456d800d1c1246ff88a1")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_44()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_45()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ah") == 0) then
      ifFuncRet = ifScriptFunc_46()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) > 0.8 or ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_47()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St2left
    --venec3Storona2left
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("807ff52160834303b455c76ed27071d8")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("fdf9086e599846a685f0dc65283b7377")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("2d02c9f9113e45d1ba9267159951bef7")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("208b96333782443499e60e03ab5038d7")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0 -  get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("c07920cb2cf84ff2a40c14cacf43c7af")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("3d444d31d2b24019a7adda2fbd170be9")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("01ff80c4514e4a9eb488bc67a39136fd")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("00ca0a648af74bcdbe3312fa99d0b3b5")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(get_modbus_io_status("M_F_faskaR24Ah") / 4)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("93bd64c7f1984094856b644cb565be43")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("cf165efe0a6840d6b95ac3960a829c5c")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_48()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2left_p1
        set_current_logic_tree_item("b60c0a83abe84ec9876b6790c134d14d")
        move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("bb0cb22d20dd4b38bacb91bedc15296e")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_49()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2left_p1
        set_current_logic_tree_item("f4b18bb77361460c9b6976345bfb3643")
        move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("cd0efbe4343c474595fa96a2357fee79")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_50()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_53()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_27() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("426baaeccd09495082c14993bb1310f2")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("1692b0a3f899464aa1a9e9d15c4d523b")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("30038a83af594443b893d21d223b26dd")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("7ed0744399d44035a8284e37ef7bf7bf")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("ff3c5de5a4884cae9a7ce58275879539")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("908c03417f8d4eb4881d19bbbde69dac")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2left_p1
        set_current_logic_tree_item("7499387334eb40809319069cc863be7b")
        move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("613a337c5c204ffbae17883b0e65be5d")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_34()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("eefa4c0f5f624caf9e35bc39c64baaab")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("800f534c3000496b81e972b0b086d9d9")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_44()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("0d07e35691e54009be80f367a753d8aa")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("85d961b755c340d28831c0f83968185c")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_4()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("558054cd1f73424a8d4b4fccef277b4c")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_4()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("17cf5d30ec124d0aa9900883777a1771")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("847a0e2917e14d96a10d02449fb35aaa")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_24()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("e2ee23edce0645b4b27376b33d8a67f7")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("bcdfbf1d71694e7cb0ed5b7d1d4a7523")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("0d135fccf3df44eda25d93f55c55f73b")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function loopScriptFunc_54()
    --(Logic tree item : Move) Move_vershin_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2_vershina
      set_current_logic_tree_item("06d53d4745ba4d28aab151277dbd3170")
      move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("93520bc08d154783b471a70c28c0b70d")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_114()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("aad76fa44f544d5198c2d61d123aec46")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("d0c12c972c4442549cf04a7d2cd0dd79")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("be115d3791a043d89757553ade049504")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_34()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("c7a35b70602d4a7abefa1e993990cfe6")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_14()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p3
      set_current_logic_tree_item("d2e30dfdb7a045c98111fac0985018f9")
      move_line({-3.469247, 0.328241, -2.029586, -0.381823, -2.374369, -1.150792}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("65fefabe65464ec3ad904ac0184eebd7")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_94()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("f153fda315f5495b87b176f8f122de60")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("1d8de64f6cea4428a9953b758b1c82aa")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("4a8131f96eee480fa514d418264f34fa")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function loopScriptFunc_24()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("29d1ca510dcb4a66b9a842b8a516b6f4")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("82ac2b2ddc5f4e7c86b8a34275dead5e")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_14()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_7() == false) then
        break
      end
    end
  end

  function ifScriptFunc_104()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("b7d9e122048f4374af89dbadb3433295")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("af75c2c091ef4abd81a34e56b88a7b5b")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("144d59aad6ce4785800ee503d33fcecd")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_25()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_10() == false) then
        break
      end
    end
  end

  function loopScriptFunc_55()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("56ccd0fed5304d1fa9327c13e235dbef")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_113()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("632d64d696f5421fb789697f98eb3249")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_35()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_68()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_69()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("a568a9d9e53c49f49826c8ed7090ebcc")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("f88d379490ca4c1098efa7b66ed3988f")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_70()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("a8d017bcd093470ba1f7f7667cc5907d")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_71()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("f446eab88bc349c2af20b14b26d51648")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_15()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_75()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("cd4f6da7ffe041a0a5234f9441b9594f")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_105()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_53() == false) then
        break
      end
    end
  end

  function loopScriptFunc_15()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("9fd5952889f8481ebb551961bad9efa9")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("12bf142fb3964917821f50c4a66219e8")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_115()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_56() == false) then
        break
      end
    end
  end

  function ifScriptFunc_45()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("e0b2c8319ed5465d8ef671a8e0dfc6e2")
      add_waypoint({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240})
      --(Logic tree item : Waypoint) v3s2left_p2
      set_current_logic_tree_item("80665ee6f2b243c6bfa5ccdfd0d22f73")
      add_waypoint({-4.117970, 0.075459, -2.300400, -0.460594, -0.742724, -1.541437})
      --(Logic tree item : Waypoint) v3s2left_p3
      set_current_logic_tree_item("d24e62d24b7247f5b9e98390dd6b72bb")
      add_waypoint({-4.115945, 0.075374, -2.303382, -0.465572, -0.742038, -1.538617})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_45()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p2
      set_current_logic_tree_item("7890871bf15c40019f8385bebf1cfe32")
      move_line({-3.981127, 0.260122, -2.479080, -2.045802, -1.628131, -3.251769}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("b1b45f5953424a69a7b7d39ec16cf3f8")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_55()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("1147a66de338471e85a5f7cdc4383a9a")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("db6812d5a2b845bbaef7988e607ef876")
      add_waypoint({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240})
      --(Logic tree item : Waypoint) v3s2left_p2
      set_current_logic_tree_item("65a8159190704a2ba6ab9e10591617cf")
      add_waypoint({-4.117970, 0.075459, -2.300400, -0.460594, -0.742724, -1.541437})
      --(Logic tree item : Waypoint) v3s2left_p3
      set_current_logic_tree_item("a253bad52e2f40c890606c91b712acbb")
      add_waypoint({-4.115945, 0.075374, -2.303382, -0.465572, -0.742038, -1.538617})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_5()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("47768113f21048fc9267d443f28690a8")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_25()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("cdeb505f392249ff9361c6ff60568a46")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_51()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("e83b4447bb4a46809069194f3539947a")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_85()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_65()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_35()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_16() == false) then
        break
      end
    end
  end

  function ifScriptFunc_95()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_50() == false) then
        break
      end
    end
  end

  function loopScriptFunc_5()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p2
      set_current_logic_tree_item("a334aa2c16394cd8ba32a1491cbc367d")
      move_line({-3.990206, 0.550615, -1.605908, 0.292998, -1.532660, -2.992818}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("b7b05f704458407680dad7d00be0aae3")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_76()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("9c4b5aca33df463b8c1f88ab5a2ceba9")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function loopScriptFunc_46()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p3
      set_current_logic_tree_item("2f8a07ad0c284931bdf2b913b4a5536b")
      move_line({-3.984007, 0.263339, -2.477859, -2.047904, -1.625916, -3.253611}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("697f1a315d734a3e8976f42596aa42cd")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_96()
    --(Logic tree item : If) tochka_vershina
    if (false) then
      ifFuncRet = ifScriptFunc_97()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_98()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_99()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2Vershin
    --Vershina zuba Venec2 Storona2
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("5d91339dc66945e0b7d5e515fa179584")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("3b728da5422f48e7b1f2e0ee72d5ebc7")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("e396028c6a6642acb8a37cfd777edd7a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(-45), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("10d96f63dc934248a2f0919833cc1c5c")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("51f938e9315e4557a228cb0de8e3bcdb")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_100()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("b39a5f49167e49e78ca19feeb229661b")
        move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("c8582beedbca481e8003e27a385ff009")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_101()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("ea48d8701812400f90d4c1dc246323a5")
        move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("0c810d242b944b528ba605b2c1cc9462")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_102()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_105()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina
      init_global_move_profile()
      set_end_maxvelc(0.400000)
      set_end_maxacc(0.400000)
      set_relative_offset({0, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("94811d8cee26491e9f304441e9bb8e5d")
        move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("bd1b55550ff54eac89d6cbb56183dfb3")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Script) servoPosRelCentD
      set_current_logic_tree_item("aa7156408949489f8403734368e3472a")
      blockScriptFunc_servoPosRelCentD()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("3d12fe6ed8eb4882996d505395c1dc65")
        move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
        set_step_breakpoint()
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("ed2d384de4764e0596bea1b8a0f266d7")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("9cecfd58f1394d27923ba9678faa76b6")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("80772ff3350e461a84daae8a6accf30c")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("9cdbfa7861cc419ca7ca6404dbaf56d3")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("2f6ca0bb97cf42beb1cddbac48fde13e")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("a931797b561f42058ecc18c272d716b8")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR286h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2_vershina
        set_current_logic_tree_item("714920e6cc234aac80cef851ee44522e")
        move_line({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("2c48f8ed63df452e83bb229c1c6bf056")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_56()
    --(Logic tree item : Move) Move_vershin_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2_vershina
      set_current_logic_tree_item("86623da530e74fa78a7ad24c391667a3")
      move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("decb4fda35fa4b2c8dafa50beba78f16")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_86()
    --(Logic tree item : If) tochka_vershina
    if (false) then
      ifFuncRet = ifScriptFunc_87()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Dh") == 0) then
      ifFuncRet = ifScriptFunc_88()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) > 0.8 or ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_89()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St1Vershin
    --Vershina zuba Venec3 Storona1
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("f37cb76a56e24dc9afee959cf5b91d0a")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("e999bfeb5d814a6c9cd039f2b66cf3ad")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("3a8eebea7d1747dab90dd7673becda11")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(-45), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("de965cfff5cf497f9c27459a0622e097")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("1982e5ef427942638b7b615742407729")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_90()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR288h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1_vershina
        set_current_logic_tree_item("82fca3aaf2f843bf9fedf7eb5139b6aa")
        move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("1a86248af96042619b29b5aa1fc28567")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_91()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR288h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1_vershina
        set_current_logic_tree_item("cbbbb6dbb2ed4188ac864c5473a9f2a7")
        move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("a24d27c843d74533acc902ade2447d0b")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_92()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_95()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina
      init_global_move_profile()
      set_end_maxvelc(0.400000)
      set_end_maxacc(0.400000)
      set_relative_offset({0, 0, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR288h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1_vershina
        set_current_logic_tree_item("f67ed38fab3c4476a5d4480774055b0d")
        move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("68009817eaec429eb3a1ee5ae05c60fd")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Script) servoPosRelCentD
      set_current_logic_tree_item("2108ba25f952451ea31f0d5d3f231d45")
      blockScriptFunc_servoPosRelCentD()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR288h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1_vershina
        set_current_logic_tree_item("947e68bc29e3485294b25a214754ee05")
        move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
        set_step_breakpoint()
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("7c949fc834994f5e969a53d6f34e20f4")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("5e5d7e4763bb41a3a12c3f279df5ca3e")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("e4a7b59c28c14213b17f3635956728de")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("7bb0724c617b4060bea1fdb7d20720cc")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("b000683a18014fa9bcdb4ed5556433e8")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("dbf4ac9a60534395883dc772146023b0")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR288h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1_vershina
        set_current_logic_tree_item("26e4df6cecdd4f0ba76f39e98af6ac34")
        move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("789f5fbf49614ae9bfc178feb8548827")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_56()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_31() == false) then
        break
      end
    end
  end

  function ifScriptFunc_66()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("7e373d621384454ba4e7c5f46a7d8e28")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("4f779bc222f8487abeb953ff8b3fec94")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("e25ce8f1c7b7453ab101c0955a463685")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function loopScriptFunc_36()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("25b6b7d4ef404baaa4a6530cd859c111")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("5791bc734c0c4ac7b7b8dd3db4878453")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_6()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p3
      set_current_logic_tree_item("4eeeecc92c5a4f39b46bbc860ab86da2")
      move_line({-3.988727, 0.549936, -1.609053, 0.290497, -1.531523, -2.991879}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("5c4b8f825e7b42edb961485ca284a4d5")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_26()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("311ce8e0e90349209633003e40928b37")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("077c7b6606724db880ad8cf79168b351")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_16()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_17()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Dh") == 0) then
      ifFuncRet = ifScriptFunc_18()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) > 0.8 or ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_19()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St1right
    --venec3Storona1right
      --(Logic tree item : Script) srvPosAbsRihtZub
      set_current_logic_tree_item("e4c2d5588b434a52be184f8f60e8a882")
      blockScriptFunc_srvPosAbsRihtZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("3e36871a34a54afdb41000a4c9722d74")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("026c100416ce41948493b320294b24ea")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("80c786a9023e42ec9052758c3694a9ec")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("f287f4f4c51c45adaafda673308a4e68")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("1235a097f37e455285da4182d679d1ea")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("9cb0de0c8c4340ccb271229b70d99dab")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("8cd005b54cd64fd8bb5634b771448dab")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(get_modbus_io_status("M_F_faskaR24Ah"))}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("cb6f2c9e0af0475494be4edd73c67a02")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("92f2225037e340e58af4f8e5f6bfb151")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_20()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1right_p1
        set_current_logic_tree_item("f195a7a651a24d53bf23ab72ad9bff4f")
        move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("286d0e1621084328a0385981ca5ea187")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_21()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1right_p1
        set_current_logic_tree_item("3f7682bd52504ef2b4fd2e6be8bf531c")
        move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("33355bdbcbfb4643b7c65c0768cddd57")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_22()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_25()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_11() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("75ed059677aa4a7da38466d002b2d472")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("22b9ec4de8714bfb9f32cd2f915456e0")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("8b0e6382cdd4427bb6383945787d367e")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("e48044f399d74bf18e194b262a4782b1")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("ed4d1ef2f2fc4dd28c6a99d65d250d2c")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("4ec93b3086d741ce849cea8f4247bd3f")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s1right_p1
        set_current_logic_tree_item("9be77cdad4334aa59d3b9e6a92407c3e")
        move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("bebe9279083b458d80f503bb133466e2")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_106()
    --(Logic tree item : If) tochka_vershina
    if (false) then
      ifFuncRet = ifScriptFunc_107()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c11Ah") == 0) then
      ifFuncRet = ifScriptFunc_108()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) > 0.8 or ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_109()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven3St2Vershin
    --Vershina zuba Venec3 Storona2
      --(Logic tree item : Script) srvPosAbsLeftZub
      set_current_logic_tree_item("da5ccd8b9ad1479fa88d497d6d81ad9d")
      blockScriptFunc_srvPosAbsLeftZub()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("f5525951dee2481aa6cd753698a51094")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("2f854e78d54e48a2aba2adef35aa7664")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(-45), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("89baaaca4665423cae64d20ec96ac105")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("f62291786d8d4051a459d152d9de718a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_110()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2_vershina
        set_current_logic_tree_item("22f4ac9a0123485bbdcaac366a925328")
        move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("29d7a502b3174cfd92f00e4653645b03")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_111()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2_vershina
        set_current_logic_tree_item("baf29e7d0de445408c175d5994805ea3")
        move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("5e611638bce346e0ab93ba9fbbaf61fe")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_112()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_115()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_vershina
      init_global_move_profile()
      set_end_maxvelc(0.400000)
      set_end_maxacc(0.400000)
      set_relative_offset({0, 0, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2_vershina
        set_current_logic_tree_item("8c7ff25be0a44764b5f6aff49b81464e")
        move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("23ddc680ae2a47fd9ec1b75680064737")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Script) servoPosRelCentD
      set_current_logic_tree_item("35080da7f2894bd88146821c628c3628")
      blockScriptFunc_servoPosRelCentD()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_oper
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, 0, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2_vershina
        set_current_logic_tree_item("e532825aea234847b5d6ca39f12de84e")
        move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
        set_step_breakpoint()
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("2896812556ae48f587d0a7da47400038")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("3a56ba896f3d48ee88d21dd22f7b2152")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("c9bdd802cba04797953619cdc5757d31")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("129e54322c1843a2a90e00d08aa7a9d7")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("3bce749ae3ea44bcb3d603f034a30658")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("b3e3fe0152d743cba5230ce21436361e")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_vershina_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, 0, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR28Ah")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v3s2_vershina
        set_current_logic_tree_item("0ac895f6af6e4908b98e110b4e3eca20")
        move_line({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk0
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk
        set_current_logic_tree_item("9f0c00f942e940c38a788afbc0edb67a")
        move_joint(get_global_variable("V_P_drillDisk"), true)
        set_step_breakpoint()
  end

  function loopScriptFunc_16()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("292f249da0264af698afb8846e150d3d")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("b3e77414505842c3a2c413919b42849a")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_26()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_12() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_13() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_14() == false) then
        break
      end
    end
  end

  function ifScriptFunc_6()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("63c2ebc5a4c543e1a293c16bd2b22567")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_46()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("1ab6989f3ab04118b0755fb60e0b5ecd")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_36()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("c5d7a590298344c8b30acab34a2fa117")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_17() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("4ca0175a60c14543ba80931e0220dd04")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("9d11f98d887844829ef04acc23990321")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("51fca008841542d2a7cf8d4fc27a0a01")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_38()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("90700d4a46114950bde7bb783f5588c1")
    sleep(0.8)
    set_step_breakpoint()
  end

  function ifScriptFunc_97()
    --(Logic tree item : Move) Move_vershina
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({10.471976,10.471976,15.707963,10.471976,10.471976,10.471976})
      --(Logic tree item : Waypoint) v2s2_vershina
      set_current_logic_tree_item("ffe975ad2144448198abb7ce0a4d01e9")
      move_joint({-3.826204, 0.218398, -2.477672, -1.784338, -1.108177, -0.517515}, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_87()
    --(Logic tree item : Move) Move_vershina
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({10.471976,10.471976,15.707963,10.471976,10.471976,10.471976})
      --(Logic tree item : Waypoint) v3s1_vershina
      set_current_logic_tree_item("0a1ddcec67d0491daa79606a4c4e6262")
      move_joint({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_17()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("975bbb8b030d48579b55d1d54525b211")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_37()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("fac9421e4e5d402e826ebb5655a6a118")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_47()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("47fa7fd29e2b4fd2b928abba7d15ad42")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_7()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR260h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1left_p1
      set_current_logic_tree_item("81468bdc2313430888b761f7e2c18f14")
      move_line({-3.991680, 0.553865, -1.604448, 0.291245, -1.533797, -2.993764}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("991f28cf972949ed91475491522b74b5")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_37()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_17()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("ccdc37277e9b481bb491cf772c1bd79e")
      add_waypoint({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878})
      --(Logic tree item : Waypoint) v3s1right_p2
      set_current_logic_tree_item("ae84361ffe9f45b1912b39086bca9ca1")
      add_waypoint({-3.466631, 0.326741, -2.028916, -0.377165, -2.373335, -1.147334})
      --(Logic tree item : Waypoint) v3s1right_p3
      set_current_logic_tree_item("35902efa61824c57b98113b7dca5ed1d")
      add_waypoint({-3.469247, 0.328241, -2.029586, -0.381823, -2.374369, -1.150792})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function loopScriptFunc_47()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR27Ah") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2right_p1
      set_current_logic_tree_item("b89d30e33cfb4d928276c8fbabe137b7")
      move_line({-3.978237, 0.263860, -2.481193, -2.051546, -1.630358, -3.249917}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("ef249d21062d47038f9827623a7e0d88")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_107()
    --(Logic tree item : Move) Move_vershina
    init_global_move_profile()
    set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
    set_joint_maxacc({10.471976,10.471976,15.707963,10.471976,10.471976,10.471976})
      --(Logic tree item : Waypoint) v3s2_vershina
      set_current_logic_tree_item("9de3b84a7e1b4879b7b6d69bd95e5380")
      move_joint({-3.840847, 0.204405, -2.497179, -1.784001, -1.099242, -0.530507}, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_27()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("bffaf1f10a49421da93f1e69d3730e9d")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("e4e0154c6a1e4131925da563e2e9ee82")
      add_waypoint({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878})
      --(Logic tree item : Waypoint) v3s1right_p2
      set_current_logic_tree_item("1bc4377501cb4b7292e7114d362f6089")
      add_waypoint({-3.466631, 0.326741, -2.028916, -0.377165, -2.373335, -1.147334})
      --(Logic tree item : Waypoint) v3s1right_p3
      set_current_logic_tree_item("7568858c377a4bd89ba36c0da51f9a90")
      add_waypoint({-3.469247, 0.328241, -2.029586, -0.381823, -2.374369, -1.150792})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_77()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_40() == false) then
        break
      end
    end
  end

  function ifScriptFunc_7()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_0() == false) then
        break
      end
    end
  end

  function loopScriptFunc_37()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("17684e2fb9434591b1b8c62a32b31269")
      move_line({-3.962552, 0.271650, -2.459115, -2.036599, -1.642415, -3.239866}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("9d21a6e3e17f4104a4da37a2ca574f3d")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_67()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_34() == false) then
        break
      end
    end
  end

  function ifScriptFunc_57()
    --(Logic tree item : Break) Break
    do return false end
  end

  function loopScriptFunc_27()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_54()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_55()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("0bf10c9983f440e692682cf5c892c727")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("27c35254a24b4245bba1bca464c845de")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_56()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("93ec2aa66ede425e8a2deac0c9364e8b")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_57()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("adb5d2c1746642e3bff59cd69ff04507")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function ifScriptFunc_38()
    --(Logic tree item : Procedure) AspiraciyaOn
      --(Logic tree item : Set) Set_DIOnumber6
      set_current_logic_tree_item("be3faa89325843daafe27bcd5053ddc2")
      set_global_variable("V_I_DIOnumber", 6)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("51f605c3c79a4ddeb7ffd7004153607a")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("f2ba11476b104c0e84325ad712dcbf06")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
  end

  function ifScriptFunc_98()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("5e9448c976ee4e35b50b2f18235b983a")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_108()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("cbb86c4567c9451e9e4b09fa7047d82d")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_28()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_15() == false) then
        break
      end
    end
  end

  function ifScriptFunc_48()
    --(Logic tree item : Wait) Wait_nextStep
    set_current_logic_tree_item("47121411c814420ab69e6ddbfec8ff99")
    while (not (get_modbus_io_status("manSc_c1B5h") == 1)) do
      sleep(0.01)
    end
    set_step_breakpoint()
  end

  function ifScriptFunc_78()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("8ede3eba248f414fb3ce679796aefec6")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_41() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("e6512d5817b54ee0a47a2f7bef810137")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("4bbffda6107543a4b24a08e80adcddb4")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("95aadac5ebb14d51a808d733a994697b")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_80()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("ecabba09970f40e19ad5dffae6cae787")
    sleep(0.8)
    set_step_breakpoint()
  end

  function loopScriptFunc_28()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p1
      set_current_logic_tree_item("c27e946587f248088820bba6511804aa")
      move_line({-4.119987, 0.080036, -2.299604, -0.462311, -0.743407, -1.544240}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("1141decf610e424d9d2787e0e08dc059")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_38()
    --(Logic tree item : Move) Move_Duga_p3_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("7a8c6e2b7130431a87f9da86710668ec")
      move_line({-3.965417, 0.274779, -2.457915, -2.038661, -1.640214, -3.241704}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("f960598fc0cd49e98f41a77b47679433")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_58()
    --(Logic tree item : If) tochkiDugi
    if (false) then
      ifFuncRet = ifScriptFunc_59()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_net_izmereniyaZ
    if (get_modbus_io_status("detec_c119h") == 0) then
      ifFuncRet = ifScriptFunc_60()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : If) If_offsetBig
    if (( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) > 0.8 or ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const")  ) < -0.8    ) then
      ifFuncRet = ifScriptFunc_61()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Block_Comment) Block_ven2St2right
    --venec2Storona2right
      --(Logic tree item : Script) srvPosAbsRihtZub
      set_current_logic_tree_item("810640599ac9452d90b63397d2cfc03b")
      blockScriptFunc_srvPosAbsRihtZub()
      set_step_breakpoint()
      --(Logic tree item : Set) Set_cnt_zubyCentr
      set_current_logic_tree_item("45f52c6ddead405f8e0962faf0d7ac41")
      set_global_variable("V_I_localCnt", get_modbus_io_status("globalR1AFh"))
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("e3340c0345194266b769710acc2f6c0e")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("d6bf908b26a3464ca10427e205b9b52b")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolX
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(get_modbus_io_status("M_F_faskaR246h")), d2r(0), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("38cb760a6c464969b545e96d4a6e0920")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("b6c74672e8054a0cbfa01bb3c5866a5b")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolY
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR248h")), d2r(0)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("60498bec6b754b8592a8a922924278a4")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("0ee49019167f4fc88683dc011cafae1e")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : Move) Move_glavUgolZ
      init_global_move_profile()
      set_joint_maxvelc({1.553343,1.553343,1.946042,1.553343,2.068215,2.068215})
      set_joint_maxacc({6.283185,6.283185,9.424778,6.283185,6.283185,6.283185})
      set_relative_offset({0, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0 - get_modbus_io_status("M_F_faskaR24Ah") + 15)}), get_tool_kinematics_param("drillDisc"))
        --(Logic tree item : Waypoint) Realtime_Waypoint
        set_current_logic_tree_item("ff9f8a2764e549e3a896161552ac63af")
        move_joint(get_global_variable("Realtime_Waypoint"), true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("721cd08dbbf1431e8541b4d6b8953f7a")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_62()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h")  ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("3602ff97e0ea421e9f463765a322e90b")
        move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("537a3100c8d3499c94b29f1d495c1868")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_63()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Move) Move_Duga_p1_oper
      init_global_move_profile()
      set_end_maxvelc(1.000000)
      set_end_maxacc(1.200000)
      set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / -1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("624a74ba877c4e1ea26a6b77886357ee")
        move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
        set_step_breakpoint()
      --(Logic tree item : Script) sendCoordToSCADA
      set_current_logic_tree_item("d1b23fd2a19f446ba255f5a07f6b6cc1")
      blockScriptFunc_sendCoordToSCADA()
      set_step_breakpoint()
      --(Logic tree item : If) If_spindelOn
      if (get_modbus_io_status("manSc_c1B4h") == 0) then
        ifFuncRet = ifScriptFunc_64()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : If) If_naladka
      if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
        ifFuncRet = ifScriptFunc_67()
        if (ifFuncRet ~= nil) then
          do return ifFuncRet end
        end
      end
      --(Logic tree item : Loop) Loop_13z
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_35() == false) then
          break
        end
      end
      --(Logic tree item : Procedure) SpindelStop
        --(Logic tree item : Set) Set_DIOnumber3
        set_current_logic_tree_item("fd5c34a5841b4c10a54f1844ab4b69ee")
        set_global_variable("V_I_DIOnumber", 3)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("6975722c988f4e6d989b28143b4910ac")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Line_Comment) stopSpindelCommand
        --1
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("98b43a5970744d1690c58e090c7064e0")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Procedure) AspiraciyaOff
        --(Logic tree item : Set) Set_DIOnumber6
        set_current_logic_tree_item("9cc9c64421ba4e92beb098d992c11cfe")
        set_global_variable("V_I_DIOnumber", 6)
        --(Logic tree item : Set) Set_stateFalse
        set_current_logic_tree_item("43ac71e89f0c481f83fa1b5e46fff7b7")
        set_global_variable("V_B_mk311DOstate", false)
        --(Logic tree item : Script) set_mk311DO
        set_current_logic_tree_item("5c2702b489744712bb9e7ecbafbb13a4")
        blockScriptFunc_set_mk311DO()
        set_step_breakpoint()
      --(Logic tree item : Move) Move_Duga_p1_safty
      init_global_move_profile()
      set_end_maxvelc(1.400000)
      set_end_maxacc(1.600000)
      set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000, get_modbus_io_status("faskaR252h") / -1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) v2s2right_p1
        set_current_logic_tree_item("19f62f5a93f94547b9a0825685d29182")
        move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
        set_step_breakpoint()
      --(Logic tree item : Move) Move_initDrilDisk180
      init_global_move_profile()
      set_joint_maxvelc({1.864012,1.864012,2.335251,1.864012,2.481858,2.481858})
      set_joint_maxacc({7.330383,7.330383,10.995574,7.330383,7.330383,7.330383})
      set_relative_offset({get_modbus_io_status("faskaR24Ch") / 1000 - 0.2, 0, 0}, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
        --(Logic tree item : Waypoint) Waypoint_V_P_drillDisk180
        set_current_logic_tree_item("e769bec53339460899391dee247ecc4c")
        move_joint(get_global_variable("V_P_drillDisk180"), true)
        set_step_breakpoint()
  end

  function ifScriptFunc_68()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_36() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_37() == false) then
        break
      end
    end
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_38() == false) then
        break
      end
    end
  end

  function ifScriptFunc_8()
    --(Logic tree item : Procedure) SpindelStart
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("f3488b6dd4074aa69d7732c17871497c")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Loop) Loop_always
      while (true) do
        sleep(0.001)
        if (loopScriptFunc_1() == false) then
          break
        end
      end
      --(Logic tree item : Set) Set_DIOnumber3
      set_current_logic_tree_item("d635de336fdb49b688e6e1c7460520fe")
      set_global_variable("V_I_DIOnumber", 3)
      --(Logic tree item : Set) Set_stateTrue
      set_current_logic_tree_item("62b8734bdc8349c1a72a0de4c4e2274c")
      set_global_variable("V_B_mk311DOstate", true)
      --(Logic tree item : Line_Comment) startSpindelCommand
      --1
      --(Logic tree item : Script) set_mk311DO
      set_current_logic_tree_item("4629d77679d5451d88a77370b2f7b89d")
      blockScriptFunc_set_mk311DO()
      set_step_breakpoint()
    --(Logic tree item : If) If_aspiraciya
    if (get_modbus_io_status("globalC170h") == 1) then
      ifFuncRet = ifScriptFunc_10()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Wait) Wait_08s
    set_current_logic_tree_item("faab4bded5614803b7a0fbee687c9df5")
    sleep(0.8)
    set_step_breakpoint()
  end

  function loopScriptFunc_18()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / 1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("838388c32a9546878223c893cfc4ef7e")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("f8ef2984b9f74fb7b1065b066ddf11a7")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_18()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("293105c37ea64be79d5c46a7bd5e934b")
    popup_message(0, "torec ne izmeren", true)
  end

  function ifScriptFunc_88()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("c453b0d31f394dc0903e44791898d5e7")
    popup_message(0, "torec ne izmeren", true)
  end

  function loopScriptFunc_48()
    --(Logic tree item : Move) Move_vershin_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v1s1_Ztorca") - get_global_variable("V_D_sat6_v1s1_const") + get_modbus_io_status("M_F_faskaR288h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1_vershina
      set_current_logic_tree_item("d83d53d8f7874e4eb7484789d3cf0cff")
      move_line({-3.773110, 0.669866, -1.400860, 0.180533, -2.002013, -3.611430}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("6fc69e522e5c471ebfd9002b2e14e35b")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_8()
    --(Logic tree item : Move) Move_Duga_p1_saftyCr
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR24Dh") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )  , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )   , ( get_global_variable("V_D_v3s1_Ztorca") - get_global_variable("V_D_sat6_v3s1_const") + get_modbus_io_status("M_F_faskaR278h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )  }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s1right_p1
      set_current_logic_tree_item("abceb17add2f471b8430d83f85285cd5")
      move_line({-3.464016, 0.328905, -2.029853, -0.377785, -2.372297, -1.143878}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("39ef53f0198d4209be631012a3f127ab")
    sleep(0.3)
    set_step_breakpoint()
  end

  function ifScriptFunc_109()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("87c43d9fdc554fe8b556cf661ed41c83")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_9()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_19()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("ba567bb6ba874fa0a4c394c80281aee6")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_39()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_18() == false) then
        break
      end
    end
  end

  function loopScriptFunc_29()
    --(Logic tree item : Move) Move_Duga_p2_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v3s2_Ztorca") - get_global_variable("V_D_sat6_v3s2_const") + get_modbus_io_status("M_F_faskaR262h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v3s2left_p2
      set_current_logic_tree_item("679d4d059e86445db595991415c84381")
      move_line({-4.117970, 0.075459, -2.300400, -0.460594, -0.742724, -1.541437}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("ff0a5c11cd794d069d561be43de43855")
    sleep(0.3)
    set_step_breakpoint()
  end

  function loopScriptFunc_9()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("c5cadcf22b5c450f86289d182e779767")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_23()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("6aabcf859b77417480ee35bd14da2013")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function ifScriptFunc_59()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("d9ad3d9a9f3f498aa0beb5ac3a8231a9")
      add_waypoint({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021})
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("5c4d82ec41ad40b1bc353ab581b6c5c1")
      add_waypoint({-3.962552, 0.271650, -2.459115, -2.036599, -1.642415, -3.239866})
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("ce0a335f023c46329f922d8a6c04e13d")
      add_waypoint({-3.965417, 0.274779, -2.457915, -2.038661, -1.640214, -3.241704})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_69()
    --(Logic tree item : Move) Move_Duga_p1_Corr
    init_global_move_profile()
    set_end_maxvelc(0.400000)
    set_end_maxacc(0.400000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("613c5eef95754d81bedcd6a8e2632f4a")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Move) Move_arc
    init_global_move_profile()
    set_end_maxvelc(0.020000)
    set_end_maxacc(0.020000)
    set_relative_offset({get_modbus_io_status("M_F_faskaR270h") / 1000, get_modbus_io_status("M_F_faskaR272h") / 1000, ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )    }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("bef33a65e8de405cbd2748f5c8f76477")
      add_waypoint({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021})
      --(Logic tree item : Waypoint) v2s2right_p2
      set_current_logic_tree_item("17a21037b48549549c6ce2afee6b08eb")
      add_waypoint({-3.962552, 0.271650, -2.459115, -2.036599, -1.642415, -3.239866})
      --(Logic tree item : Waypoint) v2s2right_p3
      set_current_logic_tree_item("047640fbfddd425ba57ad8c29dae3ebb")
      add_waypoint({-3.965417, 0.274779, -2.457915, -2.038661, -1.640214, -3.241704})
      move_track(MoveTrackType.Arc, true)
      set_step_breakpoint()
  end

  function ifScriptFunc_79()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_49()
    --(Logic tree item : Loop) Loop_nextStep
    while (get_modbus_io_status("manSc_c1B5h") == 0) do
      sleep(0.001)
      if (loopScriptFunc_24() == false) then
        break
      end
    end
  end

  function ifScriptFunc_29()
    --(Logic tree item : Break) Break
    do return false end
  end

  function ifScriptFunc_89()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("6d12a6c74fff468da055a53ef5047630")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function ifScriptFunc_99()
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("277e1b20a92b47b29e6846009177e8bd")
    popup_message(0, "slishkom bol`shoe smeshenie", true)
  end

  function loopScriptFunc_19()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1 and get_modbus_io_status("manSc_c1B7h") == 0) then
      ifFuncRet = ifScriptFunc_40()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    --(Logic tree item : Else) Else_dugaPlavno
    else
      ifFuncRet = ifScriptFunc_41()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Move) Move_Duga_p1_oper
    init_global_move_profile()
    set_end_maxvelc(1.400000)
    set_end_maxacc(1.600000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000, get_modbus_io_status("faskaR252h") / 1000  , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR25Eh") ) / 1000      }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2left_p1
      set_current_logic_tree_item("4592115d91774fb181428d62f8a4c5aa")
      move_line({-4.099828, 0.099198, -2.282652, -0.485364, -0.736756, -1.516018}, true)
      set_step_breakpoint()
    --(Logic tree item : Script) sendCoordToSCADA
    set_current_logic_tree_item("36804baa84d647afa58e591fa7a0985d")
    blockScriptFunc_sendCoordToSCADA()
    set_step_breakpoint()
    --(Logic tree item : If) If_naladka
    if (get_modbus_io_status("manSc_c1B3h") == 1 and get_modbus_io_status("manSc_c1B4h") == 1) then
      ifFuncRet = ifScriptFunc_42()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Set) Set_decCntZuby
    set_current_logic_tree_item("5af0f6577e174ca7b7e17407ef9cab9d")
    set_global_variable("V_I_localCnt", get_global_variable("V_I_localCnt") - 1)
    --(Logic tree item : If) If_end
    if (get_global_variable("V_I_localCnt") == 0  ) then
      ifFuncRet = ifScriptFunc_43()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Script) servoPosRelCentr
    set_current_logic_tree_item("871e29602b934f9d94ba050ba38886dc")
    blockScriptFunc_servoPosRelCentr()
    set_step_breakpoint()
  end

  function loopScriptFunc_49()
    --(Logic tree item : Script) check_mk312DO
    set_current_logic_tree_item("e69b5ec1556a445e911dfdb77991329e")
    blockScriptFunc_check_mk312DO()
    set_step_breakpoint()
    --(Logic tree item : If) If
    if (get_global_variable("V_B_mk312DOstate") == false) then
      ifFuncRet = ifScriptFunc_93()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
    --(Logic tree item : Message) Message
    set_current_logic_tree_item("26bb099a159a4079b1cc8b2c5993d2f0")
    popup_message(0, "запуск шпинделя невозможен - пневмозамок адаптера активен", false)
  end

  function loopScriptFunc_39()
    --(Logic tree item : Move) Move_Duga_p1_operCor
    init_global_move_profile()
    set_end_maxvelc(1.000000)
    set_end_maxacc(1.200000)
    set_relative_offset({get_modbus_io_status("faskaR245h") / 1000 + ( get_modbus_io_status("M_F_faskaR270h") / 1000 )   , get_modbus_io_status("faskaR252h") / -1000 + ( get_modbus_io_status("M_F_faskaR272h") / 1000 )    , ( get_global_variable("V_D_v2s2_Ztorca") - get_global_variable("V_D_sat6_v2s2_const") + get_modbus_io_status("M_F_faskaR276h") ) / 1000 + ( get_modbus_io_status("M_F_faskaR274h") / 1000 )   }, rpy2quaternion({d2r(0), d2r(0), d2r(0)}), get_user_coord_param("povorotnayaOsReal"))
      --(Logic tree item : Waypoint) v2s2right_p1
      set_current_logic_tree_item("03eb37395540416980762dc2e2e87fe3")
      move_line({-3.959677, 0.275278, -2.461185, -2.042164, -1.644626, -3.238021}, true)
      set_step_breakpoint()
    --(Logic tree item : Wait) Wait_03
    set_current_logic_tree_item("94352cdc34464220bcd42e60eba6225a")
    sleep(0.3)
    set_step_breakpoint()
  end

--(Logic tree item : Procedure_Program) Procedure_Program
  --(Logic tree item : Script) preFaskaScript
  set_current_logic_tree_item("4ea31c1d56b0487e947d05edfddde3f5")
  blockScriptFunc_preFaskaScript()
  set_step_breakpoint()
  --(Logic tree item : If) If_inputDataInCorect
  if (get_modbus_io_status("synhr_c121h") == 1) then
    ifFuncRet = ifScriptFunc_0()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : Set) Set_tool
  set_current_logic_tree_item("7a83d9215d164c5299a7ee43996adea3")
  set_tool_kinematics_param(get_tool_kinematics_param("drillDisc"))
  set_tool_dynamics_param(get_tool_dynamics_param("drillDisc"))
  set_step_breakpoint()
  --(Logic tree item : Block_Comment) Block_constant
  --pereopredelit` znacheniya constant
    --(Logic tree item : If) If_pereopredelit
    if (false) then
      ifFuncRet = ifScriptFunc_1()
      if (ifFuncRet ~= nil) then
        do return ifFuncRet end
      end
    end
  --(Logic tree item : If) If_ven3St1_left
  if (( get_modbus_io_status("faskaR256h") == 1 or get_modbus_io_status("faskaR256h")  == 3 ) and get_modbus_io_status("manSc_c1B8h") == 0   ) then
    ifFuncRet = ifScriptFunc_2()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven3St1_right
  if (( get_modbus_io_status("faskaR256h") == 1 or get_modbus_io_status("faskaR256h") == 3 ) and get_modbus_io_status("manSc_c1B9h") == 0   ) then
    ifFuncRet = ifScriptFunc_16()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_left
  if (( get_modbus_io_status("faskaR255h") == 2 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B8h") == 0) then
    ifFuncRet = ifScriptFunc_30()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven3St2_left
  if (( get_modbus_io_status("faskaR256h") == 2 or get_modbus_io_status("faskaR256h") == 3 ) and get_modbus_io_status("manSc_c1B8h") == 0   ) then
    ifFuncRet = ifScriptFunc_44()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_right
  if (( get_modbus_io_status("faskaR255h") == 2 or get_modbus_io_status("faskaR255h") == 3 ) and get_modbus_io_status("manSc_c1B9h") == 0   ) then
    ifFuncRet = ifScriptFunc_58()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven3St2_right
  if (( get_modbus_io_status("faskaR256h") == 2 or get_modbus_io_status("faskaR256h") == 3 ) and get_modbus_io_status("manSc_c1B9h") == 0   ) then
    ifFuncRet = ifScriptFunc_72()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven3St1_vershina
  if (( get_modbus_io_status("faskaR27Eh") == 1 or get_modbus_io_status("faskaR27Eh") == 3 ) and get_modbus_io_status("manSc_c1BAh") == 0) then
    ifFuncRet = ifScriptFunc_86()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven2St2_vershina
  if (( get_modbus_io_status("faskaR27Dh") == 2 or get_modbus_io_status("faskaR27Dh") == 3 ) and get_modbus_io_status("manSc_c1BAh") == 0) then
    ifFuncRet = ifScriptFunc_96()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : If) If_ven3St2_vershina
  if (( get_modbus_io_status("faskaR27Eh") == 2 or get_modbus_io_status("faskaR27Eh") == 3 ) and get_modbus_io_status("manSc_c1BAh") == 0) then
    ifFuncRet = ifScriptFunc_106()
    if (ifFuncRet ~= nil) then
      do return ifFuncRet end
    end
  end
  --(Logic tree item : Set) Set_zeroPUU
  set_current_logic_tree_item("9ee58ae501e94e39bc6a8304ef52e68f")
  set_modbus_io_status("50E_PR", 3)
  set_step_breakpoint()
  --(Logic tree item : Wait) Wait_PR3
  set_current_logic_tree_item("34e4cef503ae4453a326d2718ffbec1b")
  while (not (get_modbus_io_status("50E_PR") == 20003)) do
    sleep(0.01)
  end
  set_step_breakpoint()
